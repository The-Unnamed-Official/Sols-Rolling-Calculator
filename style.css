:root {
    color-scheme: dark;
    --bg-base: #02060f;
    --bg-overlay: rgba(1, 5, 12, 0.5);
    --surface-bg: rgba(7, 12, 24, 0.92);
    --surface-gradient: linear-gradient(155deg, rgba(10, 16, 32, 0.96), rgba(2, 6, 14, 0.98));
    --surface-border: rgba(120, 188, 255, 0.5);
    --surface-glow: rgba(46, 116, 196, 0.42);
    --accent: #7fe3ff;
    --accent-strong: #c5f6ff;
    --accent-soft: rgba(112, 216, 255, 0.14);
    --accent-muted: rgba(46, 116, 196, 0.35);
    --accent-rgb: 127 227 255;
    --scrollbar-track: rgba(4, 10, 22, 0.82);
    --scrollbar-track-outline: rgba(127, 227, 255, 0.12);
    --scrollbar-thumb: rgb(var(--accent-rgb) / 0.5);
    --scrollbar-thumb-hover: rgb(var(--accent-rgb) / 0.7);
    --scrollbar-thumb-active: rgb(var(--accent-rgb) / 0.88);
    --text-primary: #f6f8ff;
    --text-secondary: rgba(199, 219, 255, 0.68);
    --text-tertiary: rgba(158, 192, 243, 0.52);
    --surface-alt: rgba(4, 10, 22, 0.72);
    --shadow-strong: 0 28px 60px rgba(0, 6, 18, 0.66);
    --shadow-soft: 0 18px 34px rgba(6, 16, 36, 0.55);
    --corner-size: 28px;
    --corner-thickness: 2px;
    --button-corner-size: 10px;
    --font-base: 'Sarpanch', 'Segoe UI', sans-serif;
    --ui-scale-desktop: 0.88;
    user-select: none;
}

@property --rainbow-hue {
    syntax: '<angle>';
    inherits: false;
    initial-value: 0deg;
}

@property --button-pop-scale {
    syntax: '<number>';
    inherits: false;
    initial-value: 1;
}

@property --button-pop-raise {
    syntax: '<length>';
    inherits: false;
    initial-value: 0px;
}

@property --button-pop-rotation {
    syntax: '<angle>';
    inherits: false;
    initial-value: 0deg;
}

@keyframes luck-rainbow-cycle {
    to {
        --rainbow-hue: 360deg;
    }
}

@keyframes luckPresetMildShake {
    0%,
    100% {
        transform: translateY(var(--button-raise)) scale(var(--button-scale)) translateX(0) rotate(0deg);
    }
    20% {
        transform: translateY(var(--button-raise)) scale(var(--button-scale)) translateX(-1.6px) rotate(-0.8deg);
    }
    40% {
        transform: translateY(var(--button-raise)) scale(var(--button-scale)) translateX(1.6px) rotate(0.8deg);
    }
    60% {
        transform: translateY(var(--button-raise)) scale(var(--button-scale)) translateX(-1px) rotate(-0.5deg);
    }
    80% {
        transform: translateY(var(--button-raise)) scale(var(--button-scale)) translateX(1px) rotate(0.5deg);
    }
}

@keyframes luckPresetAggressiveShake {
    0%,
    100% {
        transform: translateY(var(--button-raise)) scale(var(--button-scale)) translateX(0) rotate(0deg);
    }
    10% {
        transform: translateY(var(--button-raise)) scale(var(--button-scale)) translateX(-4px) rotate(-3deg);
    }
    20% {
        transform: translateY(var(--button-raise)) scale(var(--button-scale)) translateX(4px) rotate(3deg);
    }
    30% {
        transform: translateY(var(--button-raise)) scale(var(--button-scale)) translateX(-5px) rotate(-4deg);
    }
    40% {
        transform: translateY(var(--button-raise)) scale(var(--button-scale)) translateX(5px) rotate(4deg);
    }
    50% {
        transform: translateY(var(--button-raise)) scale(var(--button-scale)) translateX(-3px) rotate(-2deg);
    }
    60% {
        transform: translateY(var(--button-raise)) scale(var(--button-scale)) translateX(3px) rotate(2deg);
    }
    70% {
        transform: translateY(var(--button-raise)) scale(var(--button-scale)) translateX(-2px) rotate(-1deg);
    }
    80% {
        transform: translateY(var(--button-raise)) scale(var(--button-scale)) translateX(2px) rotate(1deg);
    }
    90% {
        transform: translateY(var(--button-raise)) scale(var(--button-scale)) translateX(-1px) rotate(-0.5deg);
    }
}

@keyframes luckPresetPop {
    0% {
        --button-pop-scale: 1;
        --button-pop-raise: 0px;
        --button-pop-rotation: 0deg;
        box-shadow: 0 0 0 rgba(0, 0, 0, 0);
    }
    28% {
        --button-pop-scale: 1.24;
        --button-pop-raise: -14px;
        box-shadow: 0 26px 48px rgba(0, 6, 18, 0.42), 0 0 28px rgba(127, 227, 255, 0.32);
    }
    58% {
        --button-pop-scale: 1.08;
        --button-pop-raise: -4px;
        box-shadow: 0 16px 28px rgba(0, 6, 18, 0.32), 0 0 18px rgba(127, 227, 255, 0.24);
    }
    100% {
        --button-pop-scale: 1;
        --button-pop-raise: 0px;
        --button-pop-rotation: 0deg;
        box-shadow: 0 0 0 rgba(0, 0, 0, 0);
    }
}

@keyframes luckPresetSpinPop {
    0% {
        --button-pop-scale: 1;
        --button-pop-raise: 0px;
        --button-pop-rotation: 0deg;
        box-shadow: 0 0 0 rgba(0, 0, 0, 0);
    }
    30% {
        --button-pop-scale: 1.24;
        --button-pop-raise: -16px;
        --button-pop-rotation: 120deg;
        box-shadow: 0 30px 54px rgba(0, 6, 18, 0.46), 0 0 30px rgba(127, 227, 255, 0.34);
    }
    70% {
        --button-pop-scale: 1.08;
        --button-pop-raise: -6px;
        --button-pop-rotation: 300deg;
        box-shadow: 0 20px 34px rgba(0, 6, 18, 0.34), 0 0 24px rgba(127, 227, 255, 0.26);
    }
    100% {
        --button-pop-scale: 1;
        --button-pop-raise: 0px;
        --button-pop-rotation: 360deg;
        box-shadow: 0 0 0 rgba(0, 0, 0, 0);
    }
}

body.luck-effect--million {
    animation: luck-rainbow-cycle 6s linear infinite;
    --rainbow-hue: 0deg;
    --rainbow-edge-strong: hsl(var(--rainbow-hue) 100% 62%);
    --rainbow-edge-soft: hsl(var(--rainbow-hue) 100% 72%);
    --rainbow-edge-glow: hsla(var(--rainbow-hue), 100%, 58%, 0.35);
}

body.luck-effect--million :is(
        .surface,
        .interface-toggle,
        .interface-button,
        .preset-matrix button,
        .preset-toggle__options button,
        .preset-toggle__summary,
        .roll-trigger,
        .interface-select__summary,
        .interface-select__option-button,
        .interface-select__option--checkbox,
        .skip-cinematic-button,
        .toggle
    ) {
    --button-accent: var(--rainbow-edge-strong);
    --button-border-color: var(--rainbow-edge-soft);
    border-color: var(--rainbow-edge-soft);
    box-shadow: inset 0 0 18px var(--rainbow-edge-glow);
}

body.luck-effect--million .surface {
    --surface-edge-accent: var(--rainbow-edge-strong);
    border-color: var(--rainbow-edge-soft);
    box-shadow: var(--shadow-strong), 0 0 36px var(--rainbow-edge-glow);
}

* {
    box-sizing: border-box;
}

html, body {
    margin: 0;
    padding: 0;
}

body {
    min-height: 100vh;
    font-family: var(--font-base);
    background: var(--bg-base);
    color: var(--text-primary);
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    padding: clamp(16px, 3vw, 32px);
    position: relative;
    overflow-x: hidden;
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
}

body.reduce-motion {
    scroll-behavior: auto;
}

body.reduce-motion *,
body.reduce-motion *::before,
body.reduce-motion *::after {
    animation-duration: 0s !important;
    animation-iteration-count: 1 !important;
    animation-name: none !important;
    transition-delay: 0s !important;
    transition-duration: 0s !important;
}

body.reduce-motion .interface-backdrop__video,
body.reduce-motion .cutscene-video {
    display: none;
}

body.reduce-motion .banner__emblem--spinning img {
    animation: none !important;
}

button {
    --button-scale: 1;
    --button-raise: 0px;
    --button-pop-scale: 1;
    --button-pop-raise: 0px;
    --button-pop-rotation: 0deg;
    transform:
        translateY(var(--button-raise))
        translateY(var(--button-pop-raise))
        scale(var(--button-scale))
        scale(var(--button-pop-scale))
        rotate(var(--button-pop-rotation));
    transition: transform 0.2s ease;
    transform-origin: center;
    will-change: transform;
}

@media (prefers-reduced-motion: reduce) {
    button {
        transition: none;
        transform: none !important;
    }
}

*::-webkit-scrollbar {
    width: 12px;
    height: 12px;
}

*::-webkit-scrollbar-track {
    background: var(--scrollbar-track);
    border-radius: 999px;
    box-shadow: inset 0 0 0 1px var(--scrollbar-track-outline);
}

*::-webkit-scrollbar-thumb {
    background: linear-gradient(140deg, rgb(var(--accent-rgb) / 0.85), var(--scrollbar-thumb));
    border-radius: 999px;
    border: 2px solid rgba(2, 6, 14, 0.9);
    box-shadow: 0 0 14px rgb(var(--accent-rgb) / 0.32);
}

*::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(140deg, rgb(var(--accent-rgb) / 0.95), var(--scrollbar-thumb-hover));
}

*::-webkit-scrollbar-thumb:active {
    background: linear-gradient(140deg, rgb(var(--accent-rgb) / 1), var(--scrollbar-thumb-active));
}

body.biome--glitch {
    --bg-base: #050010;
    --surface-border: rgba(255, 100, 246, 0.52);
    --surface-glow: rgba(255, 100, 246, 0.24);
    --accent: #ff64f6;
    --accent-strong: #ffd7ff;
    --accent-soft: rgba(255, 100, 246, 0.18);
    --accent-muted: rgba(255, 100, 246, 0.32);
    --accent-rgb: 255 100 246;
    --scrollbar-track: rgba(18, 0, 34, 0.82);
    --scrollbar-track-outline: rgba(255, 100, 246, 0.18);
    --scrollbar-thumb: rgb(var(--accent-rgb) / 0.55);
    --scrollbar-thumb-hover: rgb(var(--accent-rgb) / 0.75);
    --scrollbar-thumb-active: rgb(var(--accent-rgb) / 0.92);
    --text-secondary: rgba(222, 206, 255, 0.78);
    --text-tertiary: rgba(188, 180, 255, 0.54);
}

body.biome--glitch .interface-backdrop {
    filter: hue-rotate(-18deg) saturate(1.35) contrast(1.08);
}

body.biome--glitch .interface-backdrop__veil {
    opacity: 0.85;
    mix-blend-mode: screen;
    animation: glitch-noise 12s steps(2, end) infinite;
}

body.biome--glitch::before,
body.biome--glitch::after {
    content: '';
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 0;
    transition: opacity 0.4s ease;
}

body.biome--glitch::before {
    background:
        repeating-linear-gradient(0deg, rgba(255, 255, 255, 0.04) 0 1px, transparent 1px 3px),
        repeating-linear-gradient(90deg, rgba(255, 92, 231, 0.08) 0 2px, transparent 2px 6px);
    mix-blend-mode: screen;
    opacity: 0.22;
}

body.biome--glitch::after {
    background:
        radial-gradient(circle at 18% 18%, rgba(255, 92, 231, 0.22), transparent 48%),
        radial-gradient(circle at 82% 24%, rgba(72, 214, 255, 0.2), transparent 50%);
    mix-blend-mode: lighten;
    opacity: 0.18;
}

body.biome--glitch .surface {
    border-color: rgba(255, 100, 246, 0.45);
    box-shadow: 0 28px 60px rgba(18, 0, 34, 0.68), 0 0 34px rgba(255, 100, 246, 0.18);
}

body.biome--glitch .surface::after {
    background: radial-gradient(circle at 50% 0%, rgba(255, 100, 246, 0.12), transparent 44%),
                linear-gradient(160deg, rgba(22, 6, 32, 0.96), rgba(6, 0, 14, 0.98));
}

body.biome--glitch .interface-toggle,
body.biome--glitch .roll-trigger {
    --button-background: linear-gradient(92deg, rgba(38, 0, 64, 0.9), rgba(10, 0, 24, 0.92));
    --button-border-color: rgba(255, 100, 246, 0.42);
    --button-accent: rgba(255, 100, 246, 0.6);
    color: #fff;
}

body.biome--glitch .resource-link {
    box-shadow: 0 10px 24px rgba(20, 0, 40, 0.55);
}

body.is-glitching::before,
body.is-glitching::after {
    opacity: 0.52;
    animation: glitch-noise 0.46s steps(4, end) infinite;
    filter: saturate(1.4) contrast(1.18);
}

body.is-glitching .interface-backdrop__veil {
    animation-duration: 1.6s;
    filter: hue-rotate(18deg) saturate(1.65) blur(2px);
}

body.is-glitching .interface-shell {
    animation: glitch-shell 0.16s steps(3, end) infinite;
    filter: contrast(1.38) saturate(1.8) brightness(1.08);
    transform-origin: 50% 12%;
}

body.is-glitching .surface {
    animation: glitch-surface 0.18s steps(3, end) infinite;
    filter: saturate(1.6) contrast(1.22) brightness(1.05);
    box-shadow: 0 0 24px rgba(255, 100, 246, 0.32), 0 18px 42px rgba(18, 0, 34, 0.7);
}

body.is-glitching .surface::after {
    animation: glitch-flicker 0.18s steps(3, end) infinite;
    mix-blend-mode: screen;
}

body.is-glitching .surface::before {
    content: '';
    position: absolute;
    inset: -6px;
    background:
        linear-gradient(0deg, rgba(0, 0, 0, 0.55), rgba(0, 0, 0, 0.35)),
        linear-gradient(90deg, rgba(0, 0, 0, 0.9) 50%, transparent 50%),
        linear-gradient(0deg, rgba(0, 0, 0, 0.9) 50%, transparent 50%),
        repeating-linear-gradient(180deg, rgba(255, 255, 255, 0.06) 0 2px, transparent 2px 4px);
    background-size: 200% 200%, 120px 120px, 120px 120px, 6px 6px;
    background-position: center;
    mix-blend-mode: hard-light;
    opacity: 0.65;
    filter: blur(0.2px) contrast(1.4);
    animation: glitch-fracture 0.22s steps(4, end) infinite;
    z-index: 2;
    pointer-events: none;
}

body.is-glitching .interface-shell::after {
    content: '';
    position: absolute;
    inset: -6px;
    border: 2px solid rgba(255, 100, 246, 0.38);
    pointer-events: none;
    mix-blend-mode: screen;
    animation: glitch-outline 0.16s steps(3, end) infinite;
    box-shadow: 0 0 36px rgba(255, 100, 246, 0.28);
}

body.is-glitching .interface-shell::before {
    content: '';
    position: absolute;
    inset: -12px;
    background:
        repeating-conic-gradient(from 45deg, rgba(0, 0, 0, 0.8) 0 12deg, transparent 12deg 24deg),
        repeating-linear-gradient(120deg, rgba(255, 255, 255, 0.08) 0 18px, transparent 18px 36px);
    mix-blend-mode: multiply;
    opacity: 0.4;
    animation: glitch-shard 0.18s steps(3, end) infinite;
    pointer-events: none;
    z-index: 1;
}

body.is-glitching .surface > * {
    animation: glitch-content 0.2s steps(4, end) infinite;
    filter: saturate(1.2) contrast(1.2);
}

body.is-glitching .surface > *:nth-child(odd) {
    animation-duration: 0.18s;
}

body.is-glitching .interface-toggle,
body.is-glitching .roll-trigger,
body.is-glitching .form-field__input,
body.is-glitching .interface-select__summary,
body.is-glitching .interface-select__option-button,
body.is-glitching .toggle__track,
body.is-glitching .toggle__thumb,
body.is-glitching .resource-link {
    animation: glitch-translate 0.16s steps(3, end) infinite;
    filter: hue-rotate(-12deg) saturate(1.4);
}

body.is-glitching .interface-toggle,
body.is-glitching .roll-trigger {
    box-shadow: 0 0 28px rgba(255, 100, 246, 0.38);
}

body.is-glitching .resource-link {
    box-shadow: 0 0 32px rgba(255, 100, 246, 0.28);
    transform: perspective(500px) translateZ(6px);
}

body.is-glitching .banner__title,
body.is-glitching .surface__title,
body.is-glitching .feed__tip-label,
body.is-glitching .feed__mythic-label {
    animation: glitch-chroma 0.32s steps(3, end) infinite;
}

body.is-glitching .feed__viewport {
    animation: glitch-flicker 0.18s steps(3, end) infinite;
    filter: saturate(1.5) blur(0.6px);
}

body.is-glitching .feed__viewport::before,
body.is-glitching .feed__viewport::after {
    content: '';
    position: absolute;
    inset: -2px;
    pointer-events: none;
    mix-blend-mode: difference;
}

body.is-glitching .feed__viewport::before {
    background:
        repeating-linear-gradient(0deg, rgba(255, 255, 255, 0.12) 0 6px, transparent 6px 12px),
        linear-gradient(90deg, rgba(0, 0, 0, 0.85) 50%, transparent 50%),
        linear-gradient(0deg, rgba(0, 0, 0, 0.85) 50%, transparent 50%);
    background-size: 12px 12px, 110px 110px, 110px 110px;
    animation: glitch-fracture 0.22s steps(4, end) infinite;
    opacity: 0.8;
}

body.is-glitching .feed__viewport::after {
    background: linear-gradient(90deg, rgba(255, 0, 170, 0.35), rgba(0, 255, 255, 0.3));
    animation: glitch-scan 1s steps(6, end) infinite;
    opacity: 0.45;
}

.interface-backdrop {
    position: fixed;
    inset: 0;
    background-color: var(--bg-base);
    background-image: var(--biome-background, url("files/normalBiomeImage.jpg"));
    background-position: center top;
    background-repeat: no-repeat;
    background-size: 100% 100%;
    background-attachment: fixed;
    z-index: -2;
    overflow: hidden;
}

.interface-backdrop__video {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.6s ease;
    pointer-events: none;
    z-index: 0;
}

.interface-backdrop--video-active .interface-backdrop__video {
    opacity: 1;
    visibility: visible;
}

.interface-backdrop__veil {
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at 20% 20%, rgba(30, 80, 180, 0.28), transparent 42%),
                radial-gradient(circle at 80% 15%, rgba(18, 42, 110, 0.22), transparent 28%),
                linear-gradient(135deg, rgba(2, 6, 16, 0.42), rgba(1, 4, 12, 0.5));
    backdrop-filter: blur(5px);
    z-index: 1;
}

.climate {
    position: absolute;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
}

.climate--blood-rain {
    display: none;
    z-index: 2;
    position: relative;
    isolation: isolate;
}

.climate--blood-rain::before,
.climate--blood-rain::after {
    content: '';
    position: absolute;
    inset: 0;
    opacity: 0;
    transition: opacity 0.4s ease;
}

.climate--blood-rain::before {
    background: linear-gradient(180deg, rgba(42, 0, 6, 0.65), rgba(10, 0, 2, 0.92));
    z-index: -2;
}

.climate--blood-rain::after {
    background:
        radial-gradient(circle at 18% -10%, rgba(142, 16, 26, 0.35), transparent 55%),
        radial-gradient(circle at 82% -5%, rgba(214, 42, 52, 0.25), transparent 58%);
    mix-blend-mode: plus-lighter;
    z-index: -1;
}

body.biome--blood-rain .climate--blood-rain {
    display: block;
}

body.biome--blood-rain .climate--blood-rain::before,
body.biome--blood-rain .climate--blood-rain::after {
    opacity: 0.35;
}

body.biome--blood-rain .interface-backdrop__veil {
    background:
        radial-gradient(circle at 32% 12%, rgba(168, 8, 26, 0.32), transparent 58%),
        radial-gradient(circle at 68% 6%, rgba(92, 0, 12, 0.35), transparent 60%),
        linear-gradient(180deg, rgba(8, 0, 2, 0.82), rgba(4, 0, 0, 0.92));
    backdrop-filter: blur(4px) saturate(1.1);
}

.scarlet-rain-drop {
    position: absolute;
    top: calc(-18% - var(--start-offset, 0%));
    left: var(--x, 50%);
    width: calc(2px * var(--thickness, 1));
    height: calc(70px * var(--length, 1));
    background: linear-gradient(180deg, rgba(255, 68, 76, 0.95), rgba(168, 0, 18, 0.8) 55%, rgba(80, 0, 8, 0));
    border-radius: 999px;
    opacity: var(--opacity, 0.85);
    filter: drop-shadow(0 0 8px rgba(255, 44, 68, 0.4));
    animation: blood-rain-fall var(--duration, 1.8s) linear infinite;
    animation-delay: calc(-1 * var(--delay, 0s));
    transform: translate3d(calc(-50% + var(--drift, 0px)), -120%, 0) skewX(var(--skew, 0deg));
    will-change: transform, opacity;
}

.scarlet-rain-drop::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(180deg, rgba(255, 190, 190, 0.65), transparent 62%);
    opacity: 0.6;
    border-radius: inherit;
    mix-blend-mode: screen;
}

.scarlet-rain-drop::before {
    content: '';
    position: absolute;
    bottom: -6px;
    left: 50%;
    width: calc(6px * var(--thickness, 1));
    height: calc(6px * var(--thickness, 1));
    background: radial-gradient(circle, rgba(255, 52, 68, 0.65) 0%, rgba(150, 0, 14, 0) 70%);
    transform: translateX(-50%) scale(0.6, 0.25);
    opacity: 0;
    animation: blood-rain-splash var(--duration, 1.8s) linear infinite;
    animation-delay: calc(-1 * var(--delay, 0s));
}

@keyframes blood-rain-fall {
    0% {
        transform: translate3d(calc(-50% + var(--drift, 0px)), -140%, 0) skewX(var(--skew, 0deg));
        opacity: 0;
    }
    10% {
        opacity: var(--opacity, 0.8);
    }
    92% {
        opacity: var(--opacity, 0.85);
    }
    100% {
        transform: translate3d(calc(-50% + var(--drift, 0px)), 160%, 0) skewX(var(--skew, 0deg));
        opacity: 0;
    }
}

@keyframes blood-rain-splash {
    0%, 80% {
        opacity: 0;
        transform: translateX(-50%) scale(0.5, 0.15);
    }
    90% {
        opacity: 0.4;
        transform: translateX(-50%) scale(1.1, 0.45);
    }
    100% {
        opacity: 0;
        transform: translateX(-50%) scale(1.2, 0.2);
    }
}

.interface-shell {
    width: min(1565px, 100%);
    display: flex;
    flex-direction: column;
    gap: clamp(16px, 2vw, 24px);
    position: relative;
    z-index: 1;
}

.surface {
    position: relative;
    padding: clamp(16px, 2vw, 24px);
    background:
        linear-gradient(var(--surface-edge-accent, var(--accent)), var(--surface-edge-accent, var(--accent))) top left / var(--corner-size) var(--corner-thickness) no-repeat,
        linear-gradient(var(--surface-edge-accent, var(--accent)), var(--surface-edge-accent, var(--accent))) top left / var(--corner-thickness) var(--corner-size) no-repeat,
        linear-gradient(var(--surface-edge-accent, var(--accent)), var(--surface-edge-accent, var(--accent))) top right / var(--corner-size) var(--corner-thickness) no-repeat,
        linear-gradient(var(--surface-edge-accent, var(--accent)), var(--surface-edge-accent, var(--accent))) top right / var(--corner-thickness) var(--corner-size) no-repeat,
        linear-gradient(var(--surface-edge-accent, var(--accent)), var(--surface-edge-accent, var(--accent))) bottom left / var(--corner-size) var(--corner-thickness) no-repeat,
        linear-gradient(var(--surface-edge-accent, var(--accent)), var(--surface-edge-accent, var(--accent))) bottom left / var(--corner-thickness) var(--corner-size) no-repeat,
        linear-gradient(var(--surface-edge-accent, var(--accent)), var(--surface-edge-accent, var(--accent))) bottom right / var(--corner-size) var(--corner-thickness) no-repeat,
        linear-gradient(var(--surface-edge-accent, var(--accent)), var(--surface-edge-accent, var(--accent))) bottom right / var(--corner-thickness) var(--corner-size) no-repeat,
        var(--surface-gradient);
    border: 1px solid var(--surface-border);
    box-shadow: var(--shadow-strong);
    overflow: hidden;
}

.surface.interface-header {
    overflow: visible;
    z-index: 5;
}

.surface::after {
    content: '';
    position: absolute;
    inset: 1px;
    background: radial-gradient(circle at 50% 0%, rgba(127, 227, 255, 0.08), transparent 40%),
                linear-gradient(160deg, rgba(10, 18, 34, 0.94), rgba(4, 9, 20, 0.98));
    border-radius: 12px;
    pointer-events: none;
    z-index: 0;
}

.surface > * {
    position: relative;
    z-index: 1;
}

.interface-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: clamp(16px, 3vw, 32px);
}

.masthead__brand {
    display: flex;
    align-items: center;
    gap: clamp(12px, 2vw, 20px);
    flex: 1 1 auto;
}

.banner__emblem {
    width: clamp(56px, 6vw, 68px);
    aspect-ratio: 1;
    border-radius: 12px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: radial-gradient(circle at 40% 30%, rgba(127, 227, 255, 0.4), rgba(32, 74, 136, 0.18));
    border: 1px solid rgba(140, 220, 255, 0.65);
    box-shadow: inset 0 0 14px rgba(110, 210, 255, 0.25), 0 12px 22px rgba(0, 10, 24, 0.55);
    overflow: hidden;
}

.banner__emblem img {
    width: 72%;
    height: 72%;
    object-fit: contain;
    display: block;
}

.banner__emblem--spinning img {
    animation: logo-spin 2.4s linear infinite;
    transform-origin: 50% 50%;
}

.banner__meta {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.banner__title {
    margin: 0;
    font-size: clamp(22px, 3.2vw, 30px);
    letter-spacing: 0.1em;
    text-transform: uppercase;
}

.banner__subtitle {
    margin: 0;
    font-size: clamp(13px, 1.8vw, 15px);
    letter-spacing: 0.22em;
    text-transform: uppercase;
    color: var(--text-secondary);
    display: flex;
    flex-wrap: wrap;
    align-items: baseline;
    gap: 0.35em;
}

.banner__subtitle-divider {
    color: var(--text-secondary);
}

.banner__version-button {
    font: inherit;
    text-transform: inherit;
    letter-spacing: inherit;
    color: #a5d9ff;
    background: none;
    border: none;
    padding: 0;
    cursor: pointer;
    display: inline;
    text-decoration: underline;
    text-decoration-thickness: 0.08em;
    text-underline-offset: 0.4em;
    transition: color 0.2s ease;
}

.banner__version-button:hover,
.banner__version-button:focus-visible {
    color: #d3ecff;
}

.banner__version-button:focus-visible {
    outline: 2px solid var(--accent-primary);
    outline-offset: 2px;
}

.banner__subtitle-author {
    color: #7f8cff;
    font-weight: 600;
}

.banner__subtitle-author-name {
    font-size: 1.15em;
    color: #8d9bff;
}

.banner__subtitle-updated {
    color: #ffd6e8;
    font-weight: 600;
}

.banner__subtitle-updated time {
    font: inherit;
}

.banner__subtitle-eon {
    color: #b4ffba;
    font-weight: 600;
}

@keyframes glitch-surface {
    0% {
        transform: translate3d(0, 0, 0);
    }
    20% {
        transform: translate3d(-6px, 3px, 0) skewX(1.6deg) skewY(-0.4deg) scale(1.01);
    }
    40% {
        transform: translate3d(6px, -4px, 0) skewX(-1.4deg) rotate(0.25deg);
    }
    60% {
        transform: translate3d(-4px, 5px, 0) skewY(1deg) scale(1.015);
    }
    80% {
        transform: translate3d(5px, -3px, 0) skewX(1.2deg) rotate(-0.35deg);
    }
    100% {
        transform: translate3d(0, 0, 0);
    }
}

@keyframes glitch-translate {
    0% {
        transform: translate3d(0, 0, 0);
    }
    25% {
        transform: translate3d(-6px, 4px, 0);
    }
    50% {
        transform: translate3d(6px, -4px, 0);
    }
    75% {
        transform: translate3d(-4px, -5px, 0) skewX(1deg);
    }
    100% {
        transform: translate3d(0, 0, 0);
    }
}

@keyframes glitch-flicker {
    0%, 100% {
        opacity: 1;
    }
    40% {
        opacity: 0.18;
    }
    55% {
        opacity: 0.95;
    }
    70% {
        opacity: 0.28;
    }
}

@keyframes glitch-chroma {
    0%, 100% {
        text-shadow: 0 0 0 rgba(255, 0, 170, 0), 0 0 0 rgba(0, 255, 255, 0);
    }
    33% {
        text-shadow: -4px 0 rgba(255, 0, 170, 0.9), 4px 0 rgba(0, 255, 255, 0.9);
    }
    66% {
        text-shadow: 4px 0 rgba(255, 0, 170, 0.85), -4px 0 rgba(0, 255, 255, 0.85);
    }
}

@keyframes glitch-noise {
    0% {
        background-position: 0 0, 0 0, 0 0;
    }
    20% {
        background-position: 24px -14px, -18px 16px, 0 0;
    }
    40% {
        background-position: -18px 22px, 16px -26px, 0 0;
    }
    60% {
        background-position: 22px 12px, -22px -16px, 0 0;
    }
    80% {
        background-position: -26px -18px, 26px 18px, 0 0;
    }
    100% {
        background-position: 0 0, 0 0, 0 0;
    }
}

@keyframes glitch-outline {
    0% {
        opacity: 0.25;
        transform: translate3d(0, 0, 0);
    }
    30% {
        opacity: 0.75;
        transform: translate3d(-8px, 6px, 0) skewX(1.2deg);
    }
    55% {
        opacity: 0.5;
        transform: translate3d(6px, -6px, 0) skewY(-1deg);
    }
    75% {
        opacity: 0.85;
        transform: translate3d(-6px, -4px, 0) rotate(0.4deg);
    }
    100% {
        opacity: 0.25;
        transform: translate3d(0, 0, 0);
    }
}

@keyframes glitch-shell {
    0% {
        transform: translate3d(0, 0, 0) skewX(0deg);
    }
    30% {
        transform: translate3d(-8px, 4px, 0) skewX(1.8deg) scaleX(1.01);
    }
    55% {
        transform: translate3d(6px, -6px, 0) skewY(-1.4deg) rotate(-0.3deg);
    }
    70% {
        transform: translate3d(-10px, 8px, 0) skewX(-2deg) rotate(0.35deg);
    }
    100% {
        transform: translate3d(0, 0, 0) skewX(0deg);
    }
}

@keyframes glitch-fracture {
    0% {
        clip-path: polygon(0 0, 100% 0, 100% 18%, 0 12%);
        transform: translate3d(0, 0, 0);
    }
    25% {
        clip-path: polygon(0 38%, 100% 30%, 100% 58%, 0 64%);
        transform: translate3d(-12px, 6px, 0);
    }
    50% {
        clip-path: polygon(0 70%, 100% 62%, 100% 100%, 0 86%);
        transform: translate3d(10px, -6px, 0);
    }
    75% {
        clip-path: polygon(0 16%, 100% 0, 100% 44%, 0 32%);
        transform: translate3d(-8px, -8px, 0);
    }
    100% {
        clip-path: polygon(0 0, 100% 0, 100% 18%, 0 12%);
        transform: translate3d(0, 0, 0);
    }
}

@keyframes glitch-shard {
    0% {
        background-position: 0 0, 0 0;
        opacity: 0.2;
    }
    30% {
        background-position: -40px 20px, 10px -30px;
        opacity: 0.6;
    }
    60% {
        background-position: 38px -24px, -26px 36px;
        opacity: 0.45;
    }
    80% {
        background-position: -24px -12px, 32px -20px;
        opacity: 0.7;
    }
    100% {
        background-position: 0 0, 0 0;
        opacity: 0.3;
    }
}

@keyframes glitch-content {
    0% {
        transform: translate3d(0, 0, 0);
    }
    28% {
        transform: translate3d(-4px, 2px, 0) skewX(1deg);
    }
    56% {
        transform: translate3d(6px, -4px, 0) skewY(-1deg);
    }
    72% {
        transform: translate3d(-6px, -6px, 0) rotate(0.4deg);
    }
    100% {
        transform: translate3d(0, 0, 0);
    }
}

@keyframes glitch-scan {
    0% {
        transform: translateY(-100%);
        opacity: 0.2;
    }
    50% {
        opacity: 0.6;
    }
    100% {
        transform: translateY(100%);
        opacity: 0.2;
    }
}

.masthead__controls {
    display: flex;
    flex-wrap: nowrap;
    gap: 12px;
    margin-left: auto;
    align-items: center;
}

.options-menu {
    position: relative;
}

.options-menu__trigger {
    position: relative;
    min-width: 0;
    padding-inline: 20px 96px;
    width: 170px;
    text-align: left;
}

.options-menu__trigger::after {
    content: '';
    position: absolute;
    right: 26px;
    top: 50%;
    width: 12px;
    height: 12px;
    border: 2px solid var(--accent);
    border-top: 0;
    border-left: 0;
    transform: translateY(-50%) rotate(45deg);
    transition: transform 0.2s ease, border-color 0.2s ease;
}

.options-menu--open .options-menu__trigger::after {
    transform: translateY(-50%) rotate(-135deg);
}

.options-menu__surface {
    position: absolute;
    top: calc(100% + 12px);
    right: 0;
    display: none;
    flex-direction: column;
    gap: 10px;
    width: min(320px, calc(100vw - 32px));
    min-width: min(260px, calc(100vw - 32px));
    padding: 18px;
    background: var(--surface-bg);
    border: 1px solid var(--surface-border);
    border-radius: 18px;
    box-shadow: var(--shadow-strong);
    z-index: 2000;
}

.options-menu--open .options-menu__surface {
    display: flex;
}

.options-menu__item {
    width: 100%;
    text-align: left;
    min-width: 0;
}

@media (min-width: 1200px) {
    .interface-shell,
    .interface-footer {
        margin-inline: auto;
        zoom: var(--ui-scale-desktop);
    }

    @supports not (zoom: 1) {
        .interface-shell,
        .interface-footer {
            transform: scale(var(--ui-scale-desktop));
            transform-origin: top center;
        }
    }
}

.interface-toggle {
    min-width: 150px;
    padding: 10px 18px;
    font-family: inherit;
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 0.16em;
    color: var(--text-primary);
    --button-background: linear-gradient(90deg, rgba(15, 28, 52, 0.9), rgba(10, 20, 38, 0.92));
    --button-border-color: var(--accent-muted);
    cursor: pointer;
    transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease, background 0.25s ease;
    box-shadow: inset 0 0 12px rgba(100, 180, 255, 0.15);
}

.interface-toggle,
.interface-button,
.preset-matrix button,
.preset-toggle__options button,
.preset-toggle__summary,
.roll-trigger,
.interface-select__summary,
.interface-select__option-button,
.interface-select__option--checkbox,
.skip-cinematic-button,
.toggle {
    position: relative;
    border-radius: 0;
    border: 1px solid var(--button-border-color, var(--surface-border));
    --corner-fill-size: var(--button-corner-size, 14px);
    --corner-line-thickness: var(--corner-thickness, 2px);
    background:
        linear-gradient(var(--button-accent, var(--accent)), var(--button-accent, var(--accent))) top left no-repeat,
        linear-gradient(var(--button-accent, var(--accent)), var(--button-accent, var(--accent))) top left no-repeat,
        linear-gradient(var(--button-accent, var(--accent)), var(--button-accent, var(--accent))) top right no-repeat,
        linear-gradient(var(--button-accent, var(--accent)), var(--button-accent, var(--accent))) top right no-repeat,
        linear-gradient(var(--button-accent, var(--accent)), var(--button-accent, var(--accent))) bottom left no-repeat,
        linear-gradient(var(--button-accent, var(--accent)), var(--button-accent, var(--accent))) bottom left no-repeat,
        linear-gradient(var(--button-accent, var(--accent)), var(--button-accent, var(--accent))) bottom right no-repeat,
        linear-gradient(var(--button-accent, var(--accent)), var(--button-accent, var(--accent))) bottom right no-repeat,
        var(--button-background, var(--surface-gradient));
    background-color: transparent;
    background-repeat: no-repeat;
    background-size:
        var(--corner-fill-size, var(--button-corner-size, 14px)) var(--corner-line-thickness, var(--corner-thickness, 2px)),
        var(--corner-line-thickness, var(--corner-thickness, 2px)) var(--corner-fill-size, var(--button-corner-size, 14px)),
        var(--corner-fill-size, var(--button-corner-size, 14px)) var(--corner-line-thickness, var(--corner-thickness, 2px)),
        var(--corner-line-thickness, var(--corner-thickness, 2px)) var(--corner-fill-size, var(--button-corner-size, 14px)),
        var(--corner-fill-size, var(--button-corner-size, 14px)) var(--corner-line-thickness, var(--corner-thickness, 2px)),
        var(--corner-line-thickness, var(--corner-thickness, 2px)) var(--corner-fill-size, var(--button-corner-size, 14px)),
        var(--corner-fill-size, var(--button-corner-size, 14px)) var(--corner-line-thickness, var(--corner-thickness, 2px)),
        var(--corner-line-thickness, var(--corner-thickness, 2px)) var(--corner-fill-size, var(--button-corner-size, 14px)),
        cover;
}

.interface-toggle:hover,
.interface-toggle:focus-visible {
    border-color: var(--accent);
    box-shadow: inset 0 0 18px rgba(127, 227, 255, 0.25), 0 6px 12px rgba(0, 0, 0, 0.25);
    --button-scale: 1.03;
    --button-raise: -1px;
    --button-corner-size: 16px;
    --corner-thickness: 3px;
}

.interface-toggle:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 3px;
}

.interface-toggle:active {
    --button-scale: 0.97;
    --button-raise: 0px;
}

.interface-toggle[aria-pressed="true"] {
    border-color: var(--accent);
    color: var(--accent-strong);
}

.interface-layout {
    display: grid;
    grid-template-columns: minmax(240px, 300px) minmax(520px, 1fr) minmax(340px, 420px);
    grid-template-areas: "side results controls";
    gap: clamp(16px, 2vw, 24px);
    align-items: stretch;
}

.surface--side { grid-area: side; }
.surface--results { grid-area: results; }
.surface--controls { grid-area: controls; }

.interface-subgrid {
    margin-top: clamp(16px, 2vw, 24px);
    display: grid;
    grid-template-columns: repeat(2, minmax(280px, 1fr));
    gap: clamp(16px, 2vw, 24px);
    align-items: stretch;
}

.interface-layout > .surface,
.interface-subgrid > .surface {
    height: 100%;
}

.surface--results {
    display: flex;
    flex-direction: column;
    gap: clamp(14px, 2vw, 20px);
}

.surface--controls {
    display: flex;
    flex-direction: column;
    gap: clamp(14px, 2vw, 20px);
}

.surface--side {
    display: flex;
    flex-direction: column;
    gap: clamp(14px, 2vw, 20px);
}

.surface--parameters,
.surface--presets {
    display: flex;
    flex-direction: column;
    gap: clamp(14px, 2vw, 20px);
}

.feed__meta {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: clamp(12px, 2vw, 24px);
    margin-top: clamp(8px, 1.6vw, 16px);
}

.feed__tip {
    margin: 0;
    font-size: clamp(12px, 1.6vw, 14px);
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: var(--text-secondary);
}

.feed__tip-label {
    color: #38f582;
    margin-right: 8px;
}

.feed__mythic {
    margin: 0;
    font-size: clamp(8px, 1.6vw, 10px);
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: rgba(199, 219, 255, 0.8);
    text-align: right;
}

.feed__mythic-label {
    color: rgba(46, 255, 238, 0.8);
    margin-right: 8px;
}

.surface__header {
    display: flex;
    flex-direction: column;
    gap: 4px;
    padding-bottom: 12px;
    border-bottom: 1px solid rgba(127, 227, 255, 0.16);
}

.surface__title {
    margin: 0;
    font-size: clamp(16px, 2.3vw, 20px);
    letter-spacing: 0.24em;
    text-transform: uppercase;
}

.surface__subtitle {
    margin: 0;
    font-size: 13px;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    color: var(--text-tertiary);
}

.resource-board {
    display: grid;
    grid-template-columns: 1fr;
    gap: 12px;
}

.resource-link {
    display: flex;
    flex-direction: column;
    gap: 6px;
    padding: 14px 16px;
    background: linear-gradient(180deg, rgba(14, 22, 38, 0.82), rgba(8, 14, 28, 0.88));
    border: 1px solid rgba(95, 160, 230, 0.4);
    border-radius: 12px;
    text-decoration: none;
    color: var(--text-primary);
    letter-spacing: 0.12em;
    text-transform: uppercase;
    font-size: 13px;
    transition: transform 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
    box-shadow: inset 0 0 18px rgba(90, 160, 230, 0.15);
}

.resource-link--nolifers {
    position: relative;
    overflow: visible;
}

.resource-link__arrow-cluster {
    position: absolute;
    top: 50%;
    left: -40px;
    display: flex;
    flex-direction: column;
    gap: 6px;
    transform: translateY(-50%) scale(0.85);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease, transform 0.2s ease;
}

.resource-link__arrow {
    color: var(--accent);
    font-size: 20px;
    line-height: 1;
    animation: arrow-pulse 0.6s steps(2, jump-none) infinite;
}

.resource-link__arrow:nth-child(2) {
    animation-delay: 0.15s;
}

.resource-link__arrow:nth-child(3) {
    animation-delay: 0.3s;
}

.resource-link--nolifers:hover .resource-link__arrow-cluster,
.resource-link--nolifers:focus-visible .resource-link__arrow-cluster {
    opacity: 1;
    transform: translateY(-50%) scale(1);
}

.resource-link--nolifers:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 4px;
}

.resource-link:hover {
    transform: translateY(-3px);
    border-color: var(--accent);
    box-shadow: inset 0 0 24px rgba(127, 227, 255, 0.2), 0 10px 18px rgba(0, 0, 0, 0.35);
}

.resource-link__label {
    font-size: 14px;
}

.resource-link__meta {
    font-size: 11px;
    color: var(--text-secondary);
}

@keyframes arrow-pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.1;
    }
}

.loading-indicator {
    --loading-indicator-corner-size: calc(var(--corner-size) * 0.7);
    --loading-indicator-corner-thickness: var(--corner-thickness);
    position: relative;
    display: grid;
    grid-template-columns: minmax(0, 1fr) auto;
    align-items: center;
    gap: 16px;
    padding: 16px 20px;
    background:
        linear-gradient(var(--accent), var(--accent)) top left / var(--loading-indicator-corner-size) var(--loading-indicator-corner-thickness) no-repeat,
        linear-gradient(var(--accent), var(--accent)) top left / var(--loading-indicator-corner-thickness) var(--loading-indicator-corner-size) no-repeat,
        linear-gradient(var(--accent), var(--accent)) top right / var(--loading-indicator-corner-size) var(--loading-indicator-corner-thickness) no-repeat,
        linear-gradient(var(--accent), var(--accent)) top right / var(--loading-indicator-corner-thickness) var(--loading-indicator-corner-size) no-repeat,
        linear-gradient(var(--accent), var(--accent)) bottom left / var(--loading-indicator-corner-size) var(--loading-indicator-corner-thickness) no-repeat,
        linear-gradient(var(--accent), var(--accent)) bottom left / var(--loading-indicator-corner-thickness) var(--loading-indicator-corner-size) no-repeat,
        linear-gradient(var(--accent), var(--accent)) bottom right / var(--loading-indicator-corner-size) var(--loading-indicator-corner-thickness) no-repeat,
        linear-gradient(var(--accent), var(--accent)) bottom right / var(--loading-indicator-corner-thickness) var(--loading-indicator-corner-size) no-repeat,
        radial-gradient(circle at 40% 0%, rgb(var(--accent-rgb) / 0.22), transparent 52%),
        radial-gradient(circle at 10% 100%, rgb(var(--accent-rgb) / 0.14), transparent 60%),
        radial-gradient(circle at 90% 50%, rgb(var(--accent-rgb) / 0.18), transparent 65%),
        linear-gradient(160deg, rgba(10, 18, 34, 0.94), rgba(2, 8, 18, 0.98));
    border: 1px solid rgb(var(--accent-rgb) / 0.28);
    box-shadow: 0 20px 44px rgba(0, 8, 20, 0.54), inset 0 0 18px rgb(var(--accent-rgb) / 0.16);
    overflow: hidden;
    isolation: isolate;
}

.loading-indicator::before {
    content: '';
    position: absolute;
    inset: auto auto -18px 35%;
    font-size: clamp(42px, 8vw, 72px);
    letter-spacing: 0.08em;
    color: rgb(var(--accent-rgb) / 0.24);
    text-shadow: 0 0 22px rgb(var(--accent-rgb) / 0.28);
    transform: translate3d(-50%, 12px, 0) scale(0.94);
    opacity: 0;
    transition: opacity 0.4s ease, transform 0.4s ease;
    pointer-events: none;
    z-index: 0;
}

.loading-indicator::after {
    content: '';
    position: absolute;
    inset: -30% -60%;
    background: linear-gradient(115deg, transparent 32%, rgb(var(--accent-rgb) / 0.42) 50%, transparent 68%);
    mix-blend-mode: screen;
    opacity: 0;
    transform: translateX(-30%);
    filter: blur(12px);
    pointer-events: none;
    z-index: 1;
}

.loading-indicator[data-loading-indicator]::before {
    content: attr(data-loading-indicator) '%';
    opacity: 1;
    transform: translate3d(0, 0, 0) scale(1);
}

.loading-indicator--active::after {
    opacity: 0.6;
    animation: loading-indicator-sheen 2.4s ease-in-out infinite;
}

.loading-indicator__rail {
    position: relative;
    height: 12px;
    border-radius: 12px;
    background: linear-gradient(180deg, rgba(6, 14, 28, 0.9), rgba(2, 8, 18, 0.96));
    border: 1px solid rgb(var(--accent-rgb) / 0.25);
    box-shadow: inset 0 0 18px rgb(var(--accent-rgb) / 0.32);
    overflow: hidden;
    z-index: 2;
}

.loading-indicator__rail::after {
    content: '';
    position: absolute;
    inset: -40% -20%;
    background: radial-gradient(circle at 0% 50%, rgb(var(--accent-rgb) / 0.32), transparent 65%);
    mix-blend-mode: screen;
    opacity: 0.3;
    transform: translateX(-12%);
    pointer-events: none;
}

.loading-indicator--active .loading-indicator__rail::after {
    animation: loading-indicator-ambient 3s ease-in-out infinite;
}

.loading-indicator__fill {
    position: relative;
    height: 100%;
    width: 0;
    border-radius: inherit;
    background-image:
        linear-gradient(90deg, rgb(var(--accent-rgb) / 0.2), rgb(var(--accent-rgb) / 0.85)),
        repeating-linear-gradient(120deg, rgb(var(--accent-rgb) / 0.65) 0 28px, rgb(var(--accent-rgb) / 0.2) 28px 56px);
    background-size: 100% 100%, 220px 100%;
    background-position: 0 0, 0 0;
    box-shadow: 0 0 20px rgb(var(--accent-rgb) / 0.35);
    transition: width 0.4s cubic-bezier(0.25, 0.1, 0.25, 1);
    overflow: hidden;
}

.loading-indicator__fill::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.45), transparent 65%);
    mix-blend-mode: screen;
    opacity: 0.5;
    pointer-events: none;
}

.loading-indicator--active .loading-indicator__fill {
    animation: loading-indicator-flow 2.6s linear infinite, loading-indicator-pulse 2.2s ease-in-out infinite;
}

.loading-indicator__value {
    position: relative;
    min-width: 64px;
    justify-self: end;
    padding: 6px 14px;
    border-radius: 10px;
    font-size: 12px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    text-align: right;
    font-variant-numeric: tabular-nums;
    color: var(--accent-strong);
    background: linear-gradient(180deg, rgba(10, 22, 38, 0.92), rgba(4, 12, 26, 0.98));
    border: 1px solid rgb(var(--accent-rgb) / 0.42);
    box-shadow: 0 0 18px rgb(var(--accent-rgb) / 0.3);
    text-shadow: 0 0 14px rgb(var(--accent-rgb) / 0.52);
    z-index: 2;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.loading-indicator--active .loading-indicator__value {
    transform: translateY(-1px);
    box-shadow: 0 0 24px rgb(var(--accent-rgb) / 0.45);
}

@keyframes loading-indicator-sheen {
    0% {
        transform: translateX(-45%);
        opacity: 0;
    }
    35% {
        opacity: 0.55;
    }
    65% {
        opacity: 0.2;
    }
    100% {
        transform: translateX(45%);
        opacity: 0;
    }
}

@keyframes loading-indicator-flow {
    0% {
        background-position: 0 0, 0 0;
    }
    100% {
        background-position: 0 0, 220px 0;
    }
}

@keyframes loading-indicator-pulse {
    0%,
    100% {
        box-shadow: 0 0 18px rgb(var(--accent-rgb) / 0.36);
    }
    50% {
        box-shadow: 0 0 28px rgb(var(--accent-rgb) / 0.5);
    }
}

@keyframes loading-indicator-ambient {
    0%,
    100% {
        transform: translateX(-12%);
    }
    50% {
        transform: translateX(32%);
    }
}

.feed__viewport {
    flex: 1;
    min-height: 320px;
    background: linear-gradient(180deg, rgba(7, 14, 28, 0.92), rgba(4, 9, 20, 0.95));
    border: 1px solid rgba(95, 160, 230, 0.35);
    border-radius: 12px;
    padding: 18px 20px;
    box-shadow: inset 0 0 26px rgba(40, 94, 168, 0.25);
    overflow-y: auto;
    font-size: 14px;
    letter-spacing: 0.05em;
    line-height: 1.55;
    position: relative;
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
    user-select: text;
}

.feed__viewport span,
.feed__viewport strong {
    user-select: text;
    -webkit-user-select: text;
}

.feed__viewport span {
    cursor: text;
}

.feed-share {
    display: flex;
    justify-content: flex-end;
    margin-bottom: 14px;
    position: relative;
    z-index: 6;
}

.feed-share__trigger {
    min-width: 170px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
}

.feed-share__trigger.feed-share__trigger--success {
    color: #8feeff;
    border-color: rgba(127, 227, 255, 0.55);
}

.feed-share__trigger.feed-share__trigger--error {
    color: #ff9d9d;
    border-color: rgba(255, 120, 120, 0.55);
}

.feed-share__menu[hidden] {
    display: none;
}

.feed-share__menu {
    position: absolute;
    top: calc(100% + 10px);
    right: 0;
    min-width: 240px;
    padding: 16px;
    background: linear-gradient(180deg, rgba(8, 16, 32, 0.96), rgba(5, 10, 22, 0.98));
    border: 1px solid rgba(95, 160, 230, 0.38);
    border-radius: 12px;
    box-shadow: 0 20px 40px rgba(2, 8, 18, 0.6);
    display: grid;
    gap: 10px;
    opacity: 0;
    pointer-events: none;
    transform: translateY(8px);
    transition: opacity 0.18s ease, transform 0.18s ease;
}

.feed-share__menu.feed-share__menu--open {
    opacity: 1;
    pointer-events: auto;
    transform: translateY(0);
}

.feed-share__menu--image {
    gap: 12px;
}

.feed-share__menu-label {
    margin: 0;
    font-size: 11px;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: var(--text-secondary);
}

.feed-share__item {
    font-family: inherit;
    font-size: 12px;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    padding: 10px 12px;
    background: linear-gradient(180deg, rgba(10, 18, 36, 0.9), rgba(6, 12, 24, 0.92));
    border: 1px solid rgba(95, 160, 230, 0.35);
    border-radius: 9px;
    color: var(--text-primary);
    cursor: pointer;
    transition: border-color 0.18s ease, box-shadow 0.18s ease, transform 0.18s ease, background 0.25s ease;
}

.feed-share__item:hover,
.feed-share__item:focus-visible {
    border-color: var(--accent);
    box-shadow: inset 0 0 16px rgba(127, 227, 255, 0.18);
    --button-scale: 1.03;
    --button-raise: -1px;
}

.feed-share__item:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
}

.feed-share__item:active {
    --button-scale: 0.97;
    --button-raise: 0px;
}

.feed__viewport p {
    margin: 0 0 10px;
}

.control-section {
    display: flex;
    flex-direction: column;
    gap: 14px;
    padding: 16px;
    background: linear-gradient(180deg, rgba(12, 20, 38, 0.72), rgba(6, 12, 24, 0.82));
    border: 1px solid rgba(95, 160, 230, 0.22);
    border-radius: 12px;
    box-shadow: inset 0 0 18px rgba(70, 130, 210, 0.15);
}

.control-section__title {
    margin: 0;
    font-size: 14px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--accent-strong);
}

.form-field {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.form-field__label {
    font-size: 12px;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: var(--text-secondary);
}

.form-field__combo {
    display: flex;
    gap: 10px;
    align-items: center;
    flex-wrap: wrap;
}

.form-field__combo .form-field__input {
    min-width: 0;
}

.form-field__combo .interface-button {
    flex-shrink: 0;
    white-space: nowrap;
}

.form-field__input:not(.interface-select__summary) {
    flex: 1;
    font-family: inherit;
    font-size: 14px;
    letter-spacing: 0.08em;
    padding: 12px 14px;
    color: var(--text-primary);
    background: rgba(6, 12, 24, 0.9);
    border: 1px solid rgba(95, 160, 230, 0.35);
    border-radius: 10px;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.form-field--select {
    position: relative;
}

.form-field__input--native {
    position: absolute;
    width: 1px;
    height: 1px;
    margin: -1px;
    padding: 0;
    border: 0;
    overflow: hidden;
    clip: rect(0 0 0 0);
    clip-path: inset(50%);
    white-space: nowrap;
}

.control-section .form-field {
    width: 100%;
}

.form-field__select-shell {
    position: relative;
    display: block;
    width: 100%;
}


.form-field__select-shell--biome {
    max-width: clamp(260px, 32vw, 340px);
}

.biome-selector-row {
    display: flex;
    flex-wrap: nowrap;
    gap: 16px;
    align-items: flex-end;
}

.biome-selector-row > .form-field {
    flex: 1 1 0;
    min-width: 0;
    width: auto;
}

.biome-selector-row .form-field__select-shell--biome {
    max-width: none;
    width: 100%;
}

@media (max-width: 1100px) {
    .biome-selector-row {
        flex-wrap: wrap;
    }

    .biome-selector-row > .form-field {
        flex: 1 1 clamp(240px, 46vw, 360px);
    }
}

.form-field--events {
    min-width: clamp(200px, 25vw, 240px);
}

.event-selector-block {
    display: flex;
    flex-direction: column;
    width: 100%;
}

.interface-select {
    position: relative;
    display: block;
}


.interface-select__summary {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 18px;
    min-height: 44px;
    font-size: 12px;
    letter-spacing: 0.16em;
    text-transform: uppercase;
    color: var(--text-primary);
    cursor: pointer;
    user-select: none;
    --button-background: linear-gradient(92deg, rgba(15, 28, 52, 0.9), rgba(10, 20, 38, 0.92));
    --button-border-color: var(--accent-muted);
    list-style: none;
}

.interface-select__summary.form-field__input--event,
.form-field__input--event {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    user-select: none;
}

.interface-select__summary.form-field__input--placeholder,
.form-field__input--event.form-field__input--placeholder {
    color: var(--text-tertiary);
}

.interface-select__summary::-webkit-details-marker {
    display: none;
}

.interface-select__summary::marker {
    content: '';
    display: none;
}

.preset-toggle__summary:hover,
.preset-toggle__summary:focus-visible,
.interface-select__summary:hover,
.interface-select__summary:focus-visible {
    border-color: var(--accent);
    box-shadow: 0 0 0 2px rgba(127, 227, 255, 0.25);
    outline: none;
}

.interface-select__summary::after {
    content: '';
    flex-shrink: 0;
    width: 12px;
    height: 12px;
    border: 2px solid var(--accent);
    border-top: 0;
    border-left: 0;
    transform: rotate(45deg);
    transition: transform 0.2s ease, border-color 0.2s ease;
}

.form-field--events .interface-select__summary {
    width: 100%;
}

.form-field--events .interface-select__summary::after {
    margin-left: auto;
}

.interface-select__summary.form-field__input--placeholder::after {
    border-color: var(--text-tertiary);
}

.interface-select[open] .interface-select__summary::after {
    transform: rotate(-135deg);
}

.interface-select__menu {
    position: absolute;
    bottom: calc(100% + 8px);
    background:
        linear-gradient(var(--accent), var(--accent)) top left / var(--corner-size) var(--corner-thickness) no-repeat,
        linear-gradient(var(--accent), var(--accent)) top left / var(--corner-thickness) var(--corner-size) no-repeat,
        linear-gradient(var(--accent), var(--accent)) top right / var(--corner-size) var(--corner-thickness) no-repeat,
        linear-gradient(var(--accent), var(--accent)) top right / var(--corner-thickness) var(--corner-size) no-repeat,
        linear-gradient(var(--accent), var(--accent)) bottom left / var(--corner-size) var(--corner-thickness) no-repeat,
        linear-gradient(var(--accent), var(--accent)) bottom left / var(--corner-thickness) var(--corner-size) no-repeat,
        linear-gradient(var(--accent), var(--accent)) bottom right / var(--corner-size) var(--corner-thickness) no-repeat,
        linear-gradient(var(--accent), var(--accent)) bottom right / var(--corner-thickness) var(--corner-size) no-repeat,
        linear-gradient(175deg, rgba(12, 20, 38, 0.96), rgba(4, 10, 22, 0.98));
    background-repeat: no-repeat;
    border: 1px solid rgba(95, 160, 230, 0.35);
    border-radius: 0;
    box-shadow: 0 -18px 38px rgba(4, 10, 24, 0.65);
    padding: 14px 16px;
    display: grid;
    gap: 10px;
    max-height: 290px;
    width: 233px;
    overflow-y: auto;
    opacity: 0;
    pointer-events: none;
    transform: translateY(6px);
    transition: opacity 0.2s ease, transform 0.2s ease;
    z-index: 20;
}

.form-field--events .interface-select__menu {
    left: 0;
    right: auto;
    transform-origin: bottom left;
    width: min(340px, calc(100vw - 32px));
}

.interface-select[open] .interface-select__menu {
    opacity: 1;
    pointer-events: auto;
    transform: translateY(0);
}

.interface-select__option {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 13px;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--text-secondary);
    width: 100%;
}

.interface-select__option-label {
    flex: 1;
    display: block;
}

.interface-select__option--checkbox {
    position: relative;
    padding: 12px 14px;
    --button-background: linear-gradient(180deg, rgba(8, 14, 28, 0.72), rgba(4, 10, 22, 0.82));
    --button-border-color: rgba(95, 160, 230, 0.28);
    --button-accent: rgba(127, 227, 255, 0.38);
    box-shadow: inset 0 0 0 1px rgba(20, 36, 64, 0.35);
    transition: border-color 0.2s ease, box-shadow 0.2s ease, background 0.2s ease, transform 0.2s ease,
        background-size 0.35s cubic-bezier(0.22, 1, 0.36, 1);
}

.interface-select__option--checkbox::before {
    content: "";
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at 15% 20%, rgba(127, 227, 255, 0.2), transparent 48%),
        radial-gradient(circle at 80% 80%, rgba(120, 160, 255, 0.12), transparent 55%);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease;
}

.interface-select__option--checkbox:hover,
.interface-select__option--checkbox:focus-within {
    border-color: rgba(127, 227, 255, 0.5);
    box-shadow: inset 0 0 0 1px rgba(127, 227, 255, 0.22), 0 10px 22px rgba(5, 10, 24, 0.45);
    color: var(--text-primary);
}

.interface-select__option--checkbox:hover::before,
.interface-select__option--checkbox:focus-within::before {
    opacity: 1;
}

.interface-select__option--checkbox.interface-select__option--active {
    border-color: rgba(127, 227, 255, 0.68);
    background: linear-gradient(180deg, rgba(12, 22, 44, 0.92), rgba(6, 14, 32, 0.94));
    box-shadow: inset 0 0 0 1px rgba(127, 227, 255, 0.32), inset 0 0 22px rgba(127, 227, 255, 0.12),
        0 16px 32px rgba(4, 10, 24, 0.55);
    color: var(--accent);
    --corner-fill-size: 100%;
    --corner-line-thickness: 4px;
}

.interface-select__option--checkbox.interface-select__option--active::before {
    opacity: 1;
}

.interface-select__option--checkbox.interface-select__option--active .interface-select__option-label {
    color: var(--text-primary);
    text-shadow: 0 0 8px rgba(127, 227, 255, 0.26);
}

.interface-select__option:hover {
    color: var(--text-primary);
}

.interface-select__option--checkbox input[type="checkbox"] {
    appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 5px;
    margin: 0;
    margin-right: 12px;
    border: 1px solid rgba(95, 160, 230, 0.45);
    background: rgba(6, 12, 24, 0.88);
    display: grid;
    place-items: center;
    transition: border-color 0.2s ease, background-color 0.2s ease, box-shadow 0.2s ease;
}

.interface-select__option--checkbox input[type="checkbox"]::after {
    content: '';
    width: 10px;
    height: 10px;
    clip-path: polygon(14% 44%, 0% 63%, 43% 100%, 100% 18%, 80% 0%, 40% 62%);
    background: transparent;
    transition: background 0.2s ease;
}

.interface-select__option--checkbox input[type="checkbox"]:checked {
    border-color: rgba(127, 227, 255, 0.8);
    background: rgba(20, 36, 64, 0.95);
    box-shadow: 0 0 14px rgba(127, 227, 255, 0.25);
}

.interface-select__option--checkbox input[type="checkbox"]:checked::after {
    background: var(--accent);
}

.interface-select__option--checkbox input[type="checkbox"]:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
}

.interface-select__option span {
    flex: 1;
}

.interface-select--single .interface-select__menu {
    gap: 6px;
}

.interface-select__option-button {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    width: 100%;
    padding: 10px 12px;
    --button-background: rgba(6, 12, 24, 0.85);
    --button-border-color: rgba(95, 160, 230, 0.35);
    color: var(--text-secondary);
    font-size: 11px;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    cursor: pointer;
    transition: color 0.2s ease, background-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;
}

.interface-select__option-button:hover,
.interface-select__option-button:focus-visible {
    color: var(--text-primary);
    --button-background: rgba(30, 60, 110, 0.24);
    outline: none;
    --button-scale: 1.02;
    --button-raise: -1px;
    --button-corner-size: 14px;
    --corner-thickness: 3px;
}

.interface-select__option-button--active {
    --button-background: rgba(20, 36, 64, 0.95);
    --button-border-color: rgba(127, 227, 255, 0.4);
    color: var(--accent);
    box-shadow: inset 0 0 0 1px rgba(127, 227, 255, 0.4);
}

.interface-select__option-button--disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.interface-select__option-button:active {
    --button-scale: 0.97;
    --button-raise: 0px;
}

.biome-option__icon {
    width: 26px;
    height: 26px;
    flex-shrink: 0;
    object-fit: contain;
    pointer-events: none;
    filter: drop-shadow(0 0 6px rgba(127, 227, 255, 0.35));
    transition: filter 0.2s ease, opacity 0.2s ease;
}

details[data-select="biome-dropdown"] .interface-select__summary .biome-option__icon {
    width: 28px;
    height: 28px;
}

.biome-option__icon--hidden {
    display: none;
}

.biome-option__label {
    display: inline-flex;
    align-items: center;
    line-height: 1.4;
    text-transform: inherit;
    letter-spacing: inherit;
}

.interface-select__option-button--active .biome-option__icon {
    filter: drop-shadow(0 0 10px rgba(127, 227, 255, 0.45));
}

.interface-select__option-button--disabled .biome-option__icon,
.interface-select__option-button[disabled] .biome-option__icon {
    filter: grayscale(100%) brightness(0.55);
    opacity: 0.55;
}

.form-field--select select.form-field__input {
    appearance: none;
    -webkit-appearance: none;
    padding-right: 44px;
    background: linear-gradient(165deg, rgba(16, 28, 52, 0.88), rgba(4, 10, 22, 0.94));
    box-shadow: inset 0 0 18px rgba(60, 120, 200, 0.18);
    cursor: pointer;
}

.form-field__select-shell::after {
    content: '';
    position: absolute;
    top: 50%;
    right: 18px;
    width: 10px;
    height: 10px;
    border-right: 2px solid var(--accent);
    border-bottom: 2px solid var(--accent);
    transform: translateY(-50%) rotate(45deg);
    pointer-events: none;
    transition: border-color 0.2s ease, transform 0.2s ease;
}

.form-field__select-shell--custom::after {
    content: none;
}

.form-field__select-shell .interface-select__summary {
    width: 100%;
    justify-content: space-between;
}

.form-field__select-shell .interface-select__summary::after {
    margin-left: auto;
}

#biome-dropdown.form-field__input {
    padding-right: 60px;
}

.form-field--select:focus-within .form-field__select-shell::after {
    border-color: var(--accent-strong);
    transform: translateY(-50%) rotate(225deg);
}

select.form-field__input option {
    background-color: #050913;
    color: var(--text-primary);
}

.form-field__input:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 2px rgba(127, 227, 255, 0.25);
}

.form-field--toggle {
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
}

.toggle {
    position: relative;
    width: 60px;
    height: 30px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    --button-background: linear-gradient(96deg, rgba(16, 30, 52, 0.95), rgba(8, 16, 30, 0.92));
    --button-accent: rgba(127, 227, 255, 0.45);
    box-shadow: inset 0 0 12px rgba(100, 180, 255, 0.15);
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.toggle:hover,
.toggle:focus-within {
    border-color: var(--accent);
    box-shadow: inset 0 0 18px rgba(127, 227, 255, 0.22), 0 0 0 2px rgba(127, 227, 255, 0.2);
}

.toggle__input {
    appearance: none;
    position: absolute;
    inset: 0;
    margin: 0;
    cursor: pointer;
    z-index: 2;
}

.toggle__track {
    position: absolute;
    inset: 4px;
    border-radius: 0;
    background: rgba(12, 24, 40, 0.88);
    border: 1px solid rgba(127, 227, 255, 0.28);
    box-shadow: inset 0 0 12px rgba(127, 227, 255, 0.16);
    transition: background 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
}

.toggle:hover .toggle__track,
.toggle:focus-within .toggle__track {
    border-color: rgba(127, 227, 255, 0.55);
    box-shadow: inset 0 0 16px rgba(127, 227, 255, 0.24);
}

.toggle__thumb {
    position: absolute;
    width: 24px;
    height: calc(100% - 8px);
    border-radius: 0;
    background: linear-gradient(160deg, rgba(127, 227, 255, 0.95), rgba(98, 210, 255, 0.9));
    top: 4px;
    left: 4px;
    transition: transform 0.2s ease, background 0.2s ease, box-shadow 0.2s ease;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.45);
    transform: translateX(var(--thumb-translate, 0));
}

.toggle:hover .toggle__thumb {
    background: linear-gradient(160deg, rgba(160, 240, 255, 0.96), rgba(120, 230, 255, 0.92));
    box-shadow: 0 10px 20px rgba(5, 15, 32, 0.55);
}

.toggle:active .toggle__thumb {
    transform: translateX(var(--thumb-translate, 0)) scale(0.96);
}

.toggle__input:focus-visible + .toggle__track {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
}

.toggle__input:checked + .toggle__track {
    background: rgba(22, 42, 64, 0.92);
    border-color: rgba(127, 227, 255, 0.45);
    box-shadow: inset 0 0 16px rgba(127, 227, 255, 0.24);
}

.toggle__input:checked + .toggle__track + .toggle__thumb {
    --thumb-translate: 28px;
    background: linear-gradient(160deg, rgba(165, 255, 255, 0.95), rgba(127, 227, 255, 0.88));
}

.quick-action-group {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

.interface-button {
    font-family: inherit;
    font-size: 12px;
    letter-spacing: 0.22em;
    text-transform: uppercase;
    padding: 10px 14px;
    --button-background: rgba(6, 12, 24, 0.85);
    --button-border-color: rgba(95, 160, 230, 0.4);
    color: var(--text-primary);
    cursor: pointer;
    transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease, background 0.25s ease;
}

.interface-button:hover,
.interface-button:focus-visible {
    border-color: var(--accent);
    box-shadow: inset 0 0 16px rgba(127, 227, 255, 0.18);
    --button-scale: 1.03;
    --button-raise: -1px;
    --button-corner-size: 16px;
    --corner-thickness: 3px;
}

.interface-button:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 3px;
}

.interface-button:active {
    --button-scale: 0.97;
    --button-raise: 0px;
}

.interface-button--minor {
    min-width: 90px;
    --button-background: rgba(10, 18, 34, 0.9);
}

.interface-button--ghost {
    --button-background: rgba(10, 20, 36, 0.7);
}

.control-section--presets {
    display: flex;
    flex-direction: column;
    gap: clamp(20px, 4vw, 32px);
}

.preset-collection {
    display: flex;
    flex-direction: column;
    gap: clamp(12px, 2.5vw, 18px);
}

.preset-collection__title {
    position: relative;
    margin: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: clamp(12px, 2vw, 18px);
    font-size: clamp(11px, 1.5vw, 13px);
    letter-spacing: 0.26em;
    text-transform: uppercase;
    color: var(--text-primary);
}

.preset-collection__title-text {
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.preset-collection__title-divider {
    flex: 1 1 60px;
    height: 1px;
    background: linear-gradient(90deg, rgba(127, 227, 255, 0), rgba(127, 227, 255, 0.55));
    transform: translateY(1px);
}

.preset-collection__title-divider--end {
    background: linear-gradient(90deg, rgba(127, 227, 255, 0.55), rgba(127, 227, 255, 0));
}

.preset-matrix {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 10px;
}

.preset-matrix .preset-warning {
    grid-column: 1 / -1;
    margin: 2px 0 0;
    padding: 4px 8px 0;
    font-size: 10px;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    text-align: center;
    color: rgba(255, 255, 255, 0.7);
    opacity: 0.72;
}

.preset-matrix .preset-warning::before {
    content: '';
}

.preset-matrix button {
    font-family: inherit;
    font-size: 11px;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    padding: 10px 12px;
    --button-background: rgba(6, 12, 24, 0.85);
    --button-border-color: rgba(95, 160, 230, 0.35);
    color: var(--text-primary);
    cursor: pointer;
    transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease, background 0.25s ease;
    position: relative;
    overflow: visible;
    z-index: 1;
}

.preset-matrix button:hover,
.preset-matrix button:focus-visible,
.preset-toggle__options button:hover,
.preset-toggle__options button:focus-visible {
    border-color: var(--accent);
    box-shadow: inset 0 0 16px rgba(127, 227, 255, 0.2);
    --button-scale: 1.03;
    --button-raise: -1px;
    --button-corner-size: 16px;
    --corner-thickness: 3px;
}

.preset-matrix button:focus-visible,
.preset-toggle__options button:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 3px;
}

.preset-matrix button:active,
.preset-toggle__options button:active {
    --button-scale: 0.97;
    --button-raise: 0px;
}

body:not(.reduce-motion) #luck-preset-one-million:hover,
body:not(.reduce-motion) #luck-preset-one-million:focus-visible {
    animation: luckPresetMildShake 0.62s ease-in-out infinite;
}

body:not(.reduce-motion) #luck-preset-ten-million:hover,
body:not(.reduce-motion) #luck-preset-ten-million:focus-visible {
    animation: luckPresetAggressiveShake 0.44s cubic-bezier(0.36, 0.07, 0.19, 0.97) infinite;
}

body:not(.reduce-motion) #luck-preset-one-million.luck-preset-button--pop,
body:not(.reduce-motion) #luck-preset-one-million.luck-preset-button--pop:focus-visible {
    animation: luckPresetPop 0.68s cubic-bezier(0.18, 0.72, 0.27, 1);
    z-index: 3;
}

body:not(.reduce-motion) #luck-preset-ten-million.luck-preset-button--pop-spin,
body:not(.reduce-motion) #luck-preset-ten-million.luck-preset-button--pop-spin:focus-visible {
    animation: luckPresetSpinPop 1.4s cubic-bezier(0.2, 0.62, 0.25, 1.02);
    z-index: 4;
}

.preset-toggle {
    position: relative;
    border-radius: 10px;
    border: 1px solid rgba(95, 160, 230, 0.35);
    background: rgba(6, 12, 24, 0.85);
    color: var(--text-primary);
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
    width: 100%;
    margin: 0;
    overflow: hidden;
}

.preset-toggle[open] {
    border-color: var(--accent);
    box-shadow: inset 0 0 16px rgba(127, 227, 255, 0.2);
}

.preset-toggle__summary {
    list-style: none;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 6px;
    width: 100%;
    padding: 10px 36px 10px 12px;
    font-family: inherit;
    font-size: 11px;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    cursor: pointer;
    color: var(--text-primary);
    position: relative;
    --button-background: linear-gradient(92deg, rgba(15, 28, 52, 0.9), rgba(10, 20, 38, 0.92));
    --button-border-color: var(--accent-muted);
}

.preset-toggle__summary::-webkit-details-marker {
    display: none;
}

.preset-toggle__summary::marker {
    content: '';
    display: none;
}

.preset-toggle__summary::after {
    content: '';
    position: absolute;
    right: 14px;
    top: 50%;
    width: 12px;
    height: 12px;
    border: 2px solid var(--accent);
    border-top: 0;
    border-left: 0;
    transform: translateY(-50%) rotate(45deg);
    transition: transform 0.2s ease, border-color 0.2s ease;
}

.preset-toggle[open] .preset-toggle__summary::after {
    transform: translateY(-50%) rotate(-135deg);
}

.preset-toggle__title {
    font-weight: 600;
}

.preset-toggle__selection {
    font-size: 10px;
    letter-spacing: 0.16em;
    text-transform: uppercase;
    color: var(--text-secondary);
}

.preset-toggle__selection--placeholder {
    color: rgba(199, 219, 255, 0.48);
}

.preset-toggle__options {
    display: grid;
    gap: 8px;
    padding: 8px 12px 12px;
    border-top: 1px solid rgba(95, 160, 230, 0.35);
    background: rgba(4, 10, 22, 0.95);
}

.preset-toggle__options button {
    font-family: inherit;
    font-size: 11px;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    padding: 10px 12px;
    color: var(--text-primary);
    transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease, background 0.25s ease;
    --button-background: rgba(6, 12, 24, 0.85);
    --button-border-color: rgba(95, 160, 230, 0.35);
    width: 100%;
    text-align: left;
}

.preset-signoff {
    position: relative;
    margin-top: clamp(12px, 2vw, 20px);
    padding: clamp(12px, 2vw, 18px);
    min-height: clamp(82px, 9vw, 110px);
}

.preset-signoff__status {
    margin: 0;
    font-size: clamp(9px, 1.6vw, 12px);
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: rgba(212, 224, 255, 0.82);
    text-align: left;
    max-width: clamp(500px, 36vw, 460px);
    position: absolute;
    left: 0;
    bottom: 0;
}

.preset-signoff__status-channel {
    color: #6f7aff;
    font-weight: 700;
    letter-spacing: 0.22em;
    text-shadow: 0 0 8px rgba(111, 122, 255, 0.4);
}

.preset-signoff__status-message {
    line-height: 1.5;
    color: rgba(237, 241, 255, 0.88);
}

.preset-signoff__name {
    font-size: clamp(18px, 3vw, 26px);
    font-weight: 700;
    letter-spacing: 0.34em;
    text-transform: uppercase;
    background: linear-gradient(95deg, #000000 0%, #050505 24%, #f7f7f7 78%, #ffffff 100%);
    color: transparent;
    -webkit-background-clip: text;
    background-clip: text;
    filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.32));
    white-space: nowrap;
    text-align: right;
    position: absolute;
    top: 0;
    right: 0;
}

@media (max-width: 600px) {
    .preset-signoff {
        padding: clamp(12px, 3vw, 18px) clamp(12px, 4vw, 20px);
        min-height: unset;
        display: flex;
        flex-direction: column;
        gap: clamp(12px, 3vw, 16px);
    }

    .preset-signoff__name,
    .preset-signoff__status {
        position: static;
    }

    .preset-signoff__name {
        align-self: flex-end;
    }

    .preset-signoff__status {
        max-width: none;
    }
}

.control-section--cta {
    align-items: center;
    justify-content: center;
    background: linear-gradient(180deg, rgba(8, 14, 28, 0.82), rgba(4, 9, 20, 0.9));
}

.roll-trigger {
    width: 100%;
    padding: 18px 20px 26px;
    font-family: inherit;
    font-size: 22px;
    letter-spacing: 0.32em;
    text-transform: uppercase;
    color: #d9ff9d;
    --button-background: linear-gradient(180deg, rgba(10, 20, 6, 0.95), rgba(8, 18, 14, 0.92));
    --button-border-color: rgba(164, 255, 140, 0.55);
    --button-accent: rgba(164, 255, 140, 0.8);
    box-shadow: inset 0 0 24px rgba(120, 255, 150, 0.18), 0 16px 28px rgba(0, 0, 0, 0.45);
    cursor: pointer;
    position: relative;
    overflow: hidden;
    transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease, background 0.25s ease;
}

.roll-trigger::after {
    position: absolute;
    bottom: 6px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 11px;
    letter-spacing: 0.2em;
    color: rgba(201, 255, 160, 0.75);
}

.roll-trigger:hover,
.roll-trigger:focus-visible {
    border-color: rgba(198, 255, 170, 0.8);
    box-shadow: inset 0 0 26px rgba(180, 255, 200, 0.22), 0 20px 34px rgba(0, 0, 0, 0.48);
    --button-scale: 1.04;
    --button-raise: -2px;
    --button-corner-size: 18px;
    --corner-thickness: 3px;
}

.roll-trigger:focus-visible {
    outline: 2px solid rgba(198, 255, 170, 0.8);
    outline-offset: 4px;
}

.roll-trigger:active {
    --button-scale: 0.97;
    --button-raise: 0px;
}

.roll-trigger:disabled {
    opacity: 0.55;
    cursor: not-allowed;
    --button-scale: 1;
    --button-raise: 0px;
}

.interface-footer {
    width: min(1565px, 100%);
    margin: clamp(16px, 2vw, 24px) auto 0;
    text-align: center;
    padding-block: clamp(12px, 1.8vw, 18px);
}

.site-footer__text {
    margin: 0;
    font-size: 12px;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: var(--text-tertiary);
}

.footer-credits {
    margin-top: 10px;
}

.footer-credits__summary {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    cursor: pointer;
    position: relative;
    padding-right: 18px;
    user-select: none;
}

.footer-credits__summary::-webkit-details-marker {
    display: none;
}

.footer-credits__summary::after {
    content: "\25BC";
    font-size: 10px;
    letter-spacing: normal;
    transform: translateY(-1px);
    transition: transform 0.2s ease;
}

.footer-credits[open] .footer-credits__summary::after {
    transform: rotate(180deg) translateY(1px);
}

.footer-credits__list {
    margin: 10px 0 0;
    padding: 0;
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: 6px;
    color: var(--text-tertiary);
    font-size: 12px;
    letter-spacing: 0.06em;
    text-transform: none;
}

.footer-credits__item a {
    color: inherit;
    text-decoration: underline;
}

.footer-credits__item-inspired {
    color: #c1d7ff;
    font-size: 19px;
}

.cutscene-video {
    display: none;
    position: fixed;
    inset: 0;
    width: 100vw;
    height: 100vh;
    object-fit: cover;
    z-index: 1001;
    border: none;
    border-radius: 0;
    box-shadow: none;
    background: #000;
}

@media (max-width: 900px) {
    .cutscene-video {
        top: 50%;
        left: 50%;
        right: auto;
        bottom: auto;
        width: auto;
        height: auto;
        max-width: 90vw;
        max-height: 70vh;
        transform: translate(-50%, -50%);
        border: 2px solid rgba(127, 227, 255, 0.5);
        border-radius: 12px;
        box-shadow: 0 24px 60px rgba(0, 0, 0, 0.65);
    }
}

@media (max-width: 640px) {
    .resource-link__arrow-cluster {
        left: -28px;
        transform: translateY(-50%) scale(0.75);
    }

    .resource-link--nolifers:hover .resource-link__arrow-cluster,
    .resource-link--nolifers:focus-visible .resource-link__arrow-cluster {
        transform: translateY(-50%) scale(0.9);
    }

    .biome-selector-row {
        gap: 12px;
    }

    .biome-selector-row > .form-field,
    .form-field--events {
        flex: 1 1 100%;
        min-width: 100%;
    }

    .form-field--events .interface-select__menu {
        width: min(100%, calc(100vw - 32px));
    }
}

.cinematic-overlay {
    position: fixed;
    inset: 0;
    background: rgba(2, 6, 14, 0.55);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    backdrop-filter: blur(6px);
}

.skip-cinematic-button {
    position: fixed;
    top: clamp(16px, 4vw, 32px);
    right: clamp(16px, 4vw, 32px);
    padding: 12px 18px;
    --button-background: rgba(6, 12, 24, 0.9);
    color: var(--text-primary);
    --button-border-color: rgba(127, 227, 255, 0.4);
    text-transform: uppercase;
    letter-spacing: 0.18em;
    font-size: 12px;
    cursor: pointer;
    display: none;
    z-index: 1002;
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.45);
    transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease, background 0.25s ease;
}

.skip-cinematic-button:hover,
.skip-cinematic-button:focus-visible {
    border-color: var(--accent);
    --button-scale: 1.03;
    --button-raise: -1px;
}

.skip-cinematic-button:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 3px;
}

.skip-cinematic-button:active {
    --button-scale: 0.97;
    --button-raise: 0px;
}

/* rarity colors */
.rarity-tier-basic {
    color: #d8ddea;
    text-shadow: 0 0 6px rgba(220, 230, 255, 0.25), 0 0 2px rgba(14, 22, 38, 0.75);
}

.rarity-tier-epic {
    color: #815482;
    text-shadow: 0 0 8px rgba(129, 84, 130, 0.32), 0 0 2px rgba(15, 6, 24, 0.8);
}

.rarity-tier-unique {
    color: #dba738;
    text-shadow: 0 0 10px rgba(219, 167, 56, 0.35), 0 0 3px rgba(32, 16, 0, 0.82);
}

.rarity-tier-legendary {
    color: #3df1cf;
    text-shadow: 0 0 12px rgba(61, 241, 207, 0.35), 0 0 3px rgba(0, 22, 18, 0.78);
}

.rarity-tier-mythic {
    color: #df1ab0;
    text-shadow: 0 0 14px rgba(223, 26, 176, 0.38), 0 0 4px rgba(30, 0, 22, 0.82);
}

.rarity-tier-exalted {
    color: #10477c;
    text-shadow: 0 0 12px rgba(16, 71, 124, 0.35), 0 0 3px rgba(0, 12, 28, 0.85);
}

.rarity-tier-glorious {
    color: #851010;
    text-shadow: 0 0 12px rgba(133, 16, 16, 0.4), 0 0 3px rgba(26, 0, 0, 0.8);
}

.rarity-tier-transcendent {
    color: #b7f5f5;
    text-shadow: 0 0 14px rgba(183, 245, 245, 0.42), 0 0 3px rgba(18, 30, 36, 0.72);
}

.rarity-tier-challenged {
    color: #080808;
    text-shadow: 0 0 6px rgba(255, 255, 255, 0.65), 0 0 2px rgba(0, 0, 0, 0.85);
}

.rarity-tier-limbo {
    color: #d7d7d7;
    text-shadow:
        0 0 6px rgba(40, 40, 40, 0.95),
        0 0 12px rgba(10, 10, 10, 0.9),
        1px 1px 0 rgba(0, 0, 0, 0.95),
        -1px 1px 0 rgba(0, 0, 0, 0.95),
        1px -1px 0 rgba(0, 0, 0, 0.95),
        -1px -1px 0 rgba(0, 0, 0, 0.95);
}

.sigil-subtitle {
    display: block;
    font-size: 0.85em;
    letter-spacing: 0.08em;
    text-transform: none;
    color: var(--text-secondary);
    font-style: italic;
}

.sigil-event-text {
  color: #fff !important;
  text-shadow: 1px 1px 2px #000;
}

.sigil-outline-halloween {
    text-shadow:
        0 0 4px rgba(255, 140, 0, 0.85),
        0 0 8px rgba(255, 90, 0, 0.7),
        1px 1px 0 rgba(60, 20, 0, 0.95),
        -1px 1px 0 rgba(60, 20, 0, 0.95),
        1px -1px 0 rgba(60, 20, 0, 0.95),
        -1px -1px 0 rgba(60, 20, 0, 0.95);
}

.sigil-outline-prowler {
    text-shadow:
        0 0 4px rgba(80, 170, 255, 0.85),
        0 0 8px rgba(20, 110, 220, 0.7),
        1px 1px 0 rgba(5, 40, 120, 0.9),
        -1px 1px 0 rgba(5, 40, 120, 0.9),
        1px -1px 0 rgba(5, 40, 120, 0.9),
        -1px -1px 0 rgba(5, 40, 120, 0.9);
}

.sigil-outline-valentine {
    text-shadow:
        0 0 4px rgba(255, 140, 200, 0.85),
        0 0 8px rgba(255, 95, 170, 0.75),
        1px 1px 0 rgba(115, 20, 80, 0.9),
        -1px 1px 0 rgba(115, 20, 80, 0.9),
        1px -1px 0 rgba(115, 20, 80, 0.9),
        -1px -1px 0 rgba(115, 20, 80, 0.9);
}

.sigil-outline-april {
    text-shadow:
        0 0 4px rgba(190, 190, 190, 0.85),
        0 0 8px rgba(140, 140, 140, 0.75),
        1px 1px 0 rgba(80, 80, 80, 0.9),
        -1px 1px 0 rgba(80, 80, 80, 0.9),
        1px -1px 0 rgba(80, 80, 80, 0.9),
        -1px -1px 0 rgba(80, 80, 80, 0.9);
}

.sigil-outline-summer {
    text-shadow:
        0 0 4px rgba(255, 255, 140, 0.9),
        0 0 8px rgba(234, 240, 70, 0.75),
        1px 1px 0 rgba(145, 155, 10, 0.85),
        -1px 1px 0 rgba(155, 155, 10, 0.85),
        1px -1px 0 rgba(150, 155, 10, 0.85),
        -1px -1px 0 rgba(155, 155, 10, 0.85);
}

.sigil-outline-innovator {
    color: #f1e6ff;
    text-shadow:
        0 0 4px rgba(200, 140, 255, 0.9),
        0 0 8px rgba(150, 90, 235, 0.75),
        1px 1px 0 rgba(70, 20, 120, 0.9),
        -1px 1px 0 rgba(70, 20, 120, 0.9),
        1px -1px 0 rgba(70, 20, 120, 0.9),
        -1px -1px 0 rgba(70, 20, 120, 0.9);
}

.sigil-outline-winter {
    text-shadow:
        0 0 4px rgba(210, 240, 255, 0.9),
        0 0 8px rgba(140, 200, 255, 0.75),
        1px 1px 0 rgba(40, 90, 140, 0.85),
        -1px 1px 0 rgba(40, 90, 140, 0.85),
        1px -1px 0 rgba(40, 90, 140, 0.85),
        -1px -1px 0 rgba(40, 90, 140, 0.85);
}

.sigil-outline-blood {
    text-shadow:
        0 0 4px rgba(200, 20, 20, 0.9),
        0 0 8px rgba(150, 0, 0, 0.75),
        1px 1px 0 rgba(60, 0, 0, 0.95),
        -1px 1px 0 rgba(60, 0, 0, 0.95),
        1px -1px 0 rgba(60, 0, 0, 0.95),
        -1px -1px 0 rgba(60, 0, 0, 0.95);
}

.sigil-outline-glitch {
    text-shadow:
        0 0 6px rgba(255, 255, 255, 0.95),
        0 0 14px rgba(255, 255, 255, 0.85),
        2px 0 0 rgba(255, 255, 255, 0.98),
        -2px 0 0 rgba(255, 255, 255, 0.98),
        0 2px 0 rgba(255, 255, 255, 0.98),
        0 -2px 0 rgba(255, 255, 255, 0.98),
        2px 2px 0 rgba(255, 255, 255, 0.98),
        -2px 2px 0 rgba(255, 255, 255, 0.98),
        2px -2px 0 rgba(255, 255, 255, 0.98),
        -2px -2px 0 rgba(255, 255, 255, 0.98);
    color: #0f0018;
}

.sigil-outline-dreamspace {
    color: #ffe9ff;
    text-shadow:
        0 0 10px rgba(255, 140, 220, 0.95),
        0 0 18px rgba(255, 90, 210, 0.85),
        0 0 32px rgba(255, 90, 210, 0.75),
        3px 0 0 rgba(255, 110, 220, 0.96),
        -3px 0 0 rgba(255, 110, 220, 0.96),
        0 3px 0 rgba(255, 110, 220, 0.96),
        0 -3px 0 rgba(255, 110, 220, 0.96),
        3px 3px 0 rgba(255, 110, 220, 0.92),
        -3px 3px 0 rgba(255, 110, 220, 0.92),
        3px -3px 0 rgba(255, 110, 220, 0.92),
        -3px -3px 0 rgba(255, 110, 220, 0.92);
}

.sigil-effect-oblivion,
.sigil-effect-memory,
.sigil-effect-neferkhaf,
.sigil-effect-pixelation,
.sigil-effect-luminosity,
.sigil-effect-equinox {
    display: inline-block;
    position: relative;
}

.sigil-effect-oblivion {
    background: linear-gradient(92deg, #bb7aff 0%, #401768 40%, #26063c 100%);
    color: transparent;
    -webkit-background-clip: text;
    background-clip: text;
    text-shadow: 0 0 16px rgba(187, 122, 255, 0.45);
}

.sigil-effect-memory {
    background: linear-gradient(110deg, #f3d9ff 0%, #a26bff 45%, #3b1061 100%);
    color: transparent;
    -webkit-background-clip: text;
    background-clip: text;
    text-shadow: 0 0 20px rgba(200, 140, 255, 0.55);
}

.sigil-effect-neferkhaf {
    background: linear-gradient(125deg, #0b0805 0%, #f1d7a5 55%, #c7903e 100%);
    color: transparent;
    -webkit-background-clip: text;
    background-clip: text;
    text-shadow:
        0 0 6px rgba(12, 9, 6, 0.85),
        0 0 18px rgba(200, 152, 70, 0.6);
}

.sigil-effect-pixelation {
    color: #ff004c;
    animation: aura-pixelation-rgb 0.75s linear infinite, aura-pixelation-sway 1.1s ease-in-out infinite;
    font-family: "Press Start 2P", "Sarpanch", sans-serif;
    font-size: 0.65em;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    -webkit-font-smoothing: none;
    font-smooth: never;
    text-shadow:
        1px 1px 0 rgba(0, 0, 0, 0.85),
        -1px 1px 0 rgba(0, 0, 0, 0.85),
        1px -1px 0 rgba(0, 0, 0, 0.85),
        -1px -1px 0 rgba(0, 0, 0, 0.85),
        0 0 8px rgba(255, 255, 255, 0.55);
}

@keyframes aura-pixelation-rgb {
    0% { color: #ff004c; }
    33% { color: #00fffb; }
    66% { color: #7bff00; }
    100% { color: #ff004c; }
}

@keyframes aura-pixelation-sway {
    0% { transform: rotate(-6deg); }
    50% { transform: rotate(6deg); }
    100% { transform: rotate(-6deg); }
}

.sigil-effect-luminosity {
    color: transparent !important;
    background: linear-gradient(120deg, #f7fdff 0%, #6ad6ff 40%, #e4f7ff 70%, #ffffff 100%);
    background-size: 200% 200%;
    -webkit-background-clip: text;
    background-clip: text;
    animation: aura-luminosity-gradient 1.6s ease-in-out infinite;
    text-shadow: 0 0 18px rgba(142, 230, 255, 0.85);
}

@keyframes aura-luminosity-gradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}


.sigil-effect-equinox {
    position: relative;
    display: inline-flex;
    align-items: center;
    font-family: "Noto Serif TC", "Noto Serif", "Songti TC", "PMingLiU", serif;
    font-style: normal;
    font-weight: 700;
    font-size: 0.75rem;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    padding: 0.28em 0.9em;
    color: #ffffff;
    text-shadow:
        0 1px 0 rgba(99, 99, 99, 0.9),
        0 6px 18px rgba(12, 21, 43, 0.58),
        0 18px 38px rgba(0, 0, 0, 0.4);
    filter: drop-shadow(0 5px 18px rgba(8, 15, 34, 0.72));
    transform: skewX(-6deg) scale3d(0.98, 0.98, 1);
    animation:
        aura-equinox-beat calc(60s / 180) linear infinite,
        aura-equinox-chroma calc(120s / 180) steps(2, jump-end) infinite;
    will-change: transform, color;
}

.sigil-effect-equinox::before,
.sigil-effect-equinox::after {
    font-family: "Noto Serif TC", "Noto Serif", "Songti TC", "PMingLiU", serif;
    font-weight: 700;
    font-style: normal;
    letter-spacing: 0;
    color: currentColor;
    text-shadow:
        0 1px 0 rgba(255, 255, 255, 0.8),
        0 5px 12px rgba(12, 21, 43, 0.48);
}

.sigil-effect-equinox::before {
    content: '';
    margin-right: 0.2em;
    transform: skewX(5deg) translateY(-0.06em);
    text-shadow:
        0 1px 0 rgba(99, 99, 99, 0.9),
        0 6px 18px rgba(12, 21, 43, 0.58),
        0 18px 38px rgba(0, 0, 0, 0.4);
}

.sigil-effect-equinox::after {
    content: '';
    margin-left: 0.2em;
    transform: skewX(-5deg) translateY(-0.06em);
    text-shadow:
        0 1px 0 rgba(99, 99, 99, 0.9),
        0 6px 18px rgba(12, 21, 43, 0.58),
        0 18px 38px rgba(0, 0, 0, 0.4);
}

@keyframes aura-equinox-beat {
    0% {
        transform: skewX(-6deg) scale3d(0.96, 0.96, 1);
        animation-timing-function: cubic-bezier(0.26, 0.0, 0.42, 1);
    }
    18% {
        transform: skewX(-6deg) scale3d(1.16, 1.16, 1);
        animation-timing-function: cubic-bezier(0.55, 0.02, 0.44, 1);
    }
    46% {
        transform: skewX(-6deg) scale3d(0.98, 0.98, 1);
        animation-timing-function: cubic-bezier(0.25, 0.55, 0.38, 1);
    }
    100% {
        transform: skewX(-6deg) scale3d(1, 1, 1);
    }
}

@keyframes aura-equinox-chroma {
    0%,
    49.999% {
        color: #f7f7f7;
    }
    50%,
    100% {
        color: #050505;
    }
}

@keyframes logo-spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

@media (max-width: 1180px) {
    .interface-layout {
        grid-template-columns: repeat(2, minmax(0, 1fr));
        grid-template-areas:
            "results results"
            "controls controls"
            "side side";
    }

    .masthead__controls {
        flex-wrap: wrap;
    }

    .surface--side,
    .surface--results,
    .surface--controls {
        width: 100%;
    }
}

@media (max-width: 900px) {
    body {
        padding: clamp(12px, 4vw, 20px);
        align-items: flex-start;
    }

    .interface-layout {
        grid-template-columns: 1fr;
        grid-template-areas:
            "results"
            "controls"
            "side";
    }

    .interface-layout > .surface {
        width: 100%;
    }

    .masthead__controls {
        width: 100%;
        justify-content: center;
        margin-left: 0;
        align-self: center;
        flex-wrap: wrap;
    }

    .interface-header {
        flex-direction: column;
        align-items: flex-start;
    }

    .banner__meta {
        text-align: center;
    }

    .banner__title,
    .banner__subtitle,
    .surface__title,
    .surface__subtitle {
        text-align: center;
    }

    .feed__viewport {
        min-height: 260px;
    }

    .feed__meta {
        flex-direction: column;
        align-items: flex-start;
    }
}

.surface--parameters,
.surface--presets {
    grid-area: auto;
}

@media (max-width: 1180px) {
    .interface-subgrid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }
}

@media (max-width: 900px) {
    .interface-subgrid {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 620px) {
    .interface-shell {
        gap: 14px;
    }

    .interface-header {
        align-items: center;
    }

    .masthead__brand {
        flex-direction: column;
        text-align: center;
    }

    .options-menu__trigger {
        text-align: left !important;
    }

    .surface {
        padding: 16px;
    }

    .form-field__combo {
        flex-direction: column;
    }

    .interface-toggle {
        width: 100%;
        text-align: center;
    }

    .quick-action-group {
        flex-direction: column;
    }

    .preset-matrix {
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    }

    .roll-trigger {
        font-size: 18px;
    }
}

.cutscene-warning-overlay,
.modal-overlay {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: clamp(24px, 5vw, 48px);
    background: rgba(3, 8, 18, 0.82);
    backdrop-filter: blur(6px);
    z-index: 9999;
    opacity: 0;
    pointer-events: none;
    transition: opacity 260ms cubic-bezier(0.24, 0.82, 0.25, 1);
}

.cutscene-warning-overlay[hidden],
.modal-overlay[hidden] {
    display: none !important;
}

.cutscene-warning-overlay[data-visible],
.modal-overlay[data-visible] {
    opacity: 1;
    pointer-events: auto;
}

.cutscene-warning-overlay[data-closing],
.modal-overlay[data-closing] {
    pointer-events: none;
}

.cutscene-warning-overlay[data-visible] .surface--modal,
.modal-overlay[data-visible] .surface--modal {
    --corner-size: clamp(28px, 6vw, 36px);
    --corner-thickness: 3px;
    animation: modal-pop 0.45s cubic-bezier(0.22, 1, 0.36, 1) both;
}

.cutscene-warning-overlay[data-closing] .surface--modal,
.modal-overlay[data-closing] .surface--modal {
    animation: modal-fade-out 0.28s cubic-bezier(0.4, 0, 0.2, 1) both;
}

.changelog-modal {
    display: flex;
    flex-direction: column;
    gap: clamp(18px, 3vh, 28px);
    position: relative;
}

.changelog-modal__close {
    position: absolute;
    top: clamp(16px, 3vw, 28px);
    right: clamp(16px, 3vw, 28px);
    z-index: 20;
}

.changelog-modal__tabbar {
    position: absolute;
    top: calc(clamp(24px, 4vw, 38px) - 64px);
    left: clamp(24px, 4vw, 38px);
    right: clamp(24px, 4vw, 38px);
    display: flex;
    flex-wrap: wrap;
    align-items: flex-end;
    gap: clamp(12px, 2vw, 18px);
    row-gap: clamp(18px, 3vh, 24px);
    z-index: -1;
    pointer-events: none;
}

.changelog-tab {
    appearance: none;
    border: none;
    background: linear-gradient(180deg, rgba(30, 42, 66, 0.95) 0%, rgba(10, 16, 32, 0.9) 100%);
    color: var(--text-secondary);
    font-family: "Sarpanch", sans-serif;
    font-size: clamp(13px, 1.6vw, 15px);
    letter-spacing: 0.16em;
    text-transform: uppercase;
    padding: 14px 20px 12px;
    border-radius: 12px 12px 0 0;
    box-shadow:
        inset 0 0 0 1px rgba(255, 255, 255, 0.1),
        0 16px 28px rgba(2, 6, 14, 0.58);
    cursor: pointer;
    transition:
        transform 160ms cubic-bezier(0.22, 1, 0.36, 1),
        box-shadow 160ms ease,
        background 160ms ease,
        color 160ms ease,
        filter 160ms ease;
    position: relative;
    transform: translateY(15px);
    pointer-events: auto;
    top: -21px;
    z-index: -100 !important;
}

.changelog-tab:not(.changelog-tab--active) {
    color: var(--text-tertiary);
    filter: saturate(0.6) brightness(0.9);
}

.changelog-tab:not(.changelog-tab--active):hover,
.changelog-tab:not(.changelog-tab--active):focus-visible {
    transform: translateY(7.5px);
    filter: none;
    color: var(--text-secondary);
    box-shadow:
        inset 0 0 0 1px rgba(255, 255, 255, 0.16),
        0 20px 30px rgba(4, 12, 26, 0.62);
}

.changelog-tab:focus-visible {
    outline: none;
    box-shadow:
        inset 0 0 0 1px #9de8ff,
        0 22px 34px rgba(4, 12, 26, 0.68);
}

.changelog-tab--active {
    color: var(--text-primary);
    background: linear-gradient(180deg, rgba(157, 232, 255, 0.78) 0%, rgba(30, 58, 94, 0.98) 100%);
    transform: translateY(0);
    box-shadow:
        inset 0 0 0 1px rgba(157, 232, 255, 0.65),
        0 24px 36px rgba(4, 12, 26, 0.72);
    z-index: 10;
    filter: none;
}

.changelog-modal__panels {
    display: block;
    overflow: hidden;
    transition: height 280ms cubic-bezier(0.24, 0.82, 0.25, 1);
}

.changelog-modal__panels--animating {
    will-change: height;
}

.changelog-modal__panel {
    display: flex;
    flex-direction: column;
    gap: clamp(16px, 3vh, 24px);
    z-index: 10 !important;
}

.changelog-modal__header {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.changelog-modal__title {
    margin: 0;
    font-size: clamp(20px, 3vw, 26px);
    letter-spacing: 0.1em;
    text-transform: uppercase;
}

.changelog-modal__meta {
    margin: 0;
    font-size: clamp(13px, 1.8vw, 15px);
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--text-secondary);
}

.changelog-modal__intro {
    margin: 0;
    color: var(--text-secondary);
}

.changelog-modal__list {
    margin: 0;
    padding-left: 1.4em;
    display: flex;
    flex-direction: column;
    gap: 0.65em;
    color: var(--text-primary);
}

.changelog-modal__list li {
    line-height: 1.5;
}

@media (prefers-reduced-motion: reduce) {
    .cutscene-warning-overlay,
    .modal-overlay {
        transition: none;
    }

    .cutscene-warning-overlay[data-visible] .surface--modal,
    .cutscene-warning-overlay[data-closing] .surface--modal,
    .modal-overlay[data-visible] .surface--modal,
    .modal-overlay[data-closing] .surface--modal {
        animation: none;
        transform: none;
    }

    .changelog-modal__panels {
        transition: none;
    }
}

.surface--modal {
    --corner-size: 24px;
    padding: clamp(24px, 4vw, 38px);
    width: min(540px, 90vw);
    transform-origin: center;
}

.surface--modal.changelog-modal {
    width: min(760px, 95vw);
    padding-top: calc(clamp(24px, 4vw, 38px) + 68px);
    overflow: visible;
}

.surface--modal::after {
    border-radius: 0;
}

.cutscene-warning {
    max-width: min(540px, 90vw);
    text-align: center;
    display: flex;
    flex-direction: column;
    gap: clamp(20px, 4vh, 28px);
    margin: 0 auto;
}

.cutscene-warning__message {
    margin: 0;
    font-size: clamp(18px, 3vw, 22px);
    line-height: 1.4;
    color: var(--text-secondary);
}

.cutscene-warning__ratio {
    font-weight: 700;
    color: var(--text-primary);
}

.cutscene-warning__note {
    font-weight: 700;
    color: #9de8ff;
}

.cutscene-warning__actions {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

@keyframes modal-pop {
    0% {
        transform: scale(0.95);
    }
    60% {
        transform: scale(1.03);
    }
    100% {
        transform: scale(1);
    }
}

@keyframes modal-fade-out {
    0% {
        opacity: 1;
        transform: scale(1);
    }
    100% {
        opacity: 0;
        transform: scale(0.97);
    }
}

@media (min-width: 640px) {
    .cutscene-warning__actions {
        flex-direction: row;
        justify-content: center;
    }
}
